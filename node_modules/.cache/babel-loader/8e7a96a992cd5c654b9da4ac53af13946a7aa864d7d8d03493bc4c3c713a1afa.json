{"ast":null,"code":"import axios from 'axios';\nimport toast from '../utils/notifications';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\n\n// Crear instancia de axios para autenticación\nconst authAPI = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Claves para localStorage\nconst TOKEN_KEY = 'auth_token';\nconst USER_KEY = 'auth_user';\nconst EXPIRES_AT_KEY = 'auth_expires_at';\n\n/**\n * Servicio de autenticación\n */\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem(TOKEN_KEY);\n    this.user = null;\n    this.expiresAt = localStorage.getItem(EXPIRES_AT_KEY);\n\n    // Cargar usuario si existe token válido\n    this.loadUserFromStorage();\n\n    // Configurar interceptor de axios para agregar token automáticamente\n    this.setupAuthInterceptor();\n  }\n\n  /**\n   * Carga el usuario del localStorage si hay un token válido\n   */\n  loadUserFromStorage() {\n    if (this.token && this.isTokenValid()) {\n      try {\n        const userData = localStorage.getItem(USER_KEY);\n        if (userData) {\n          this.user = JSON.parse(userData);\n        }\n      } catch (error) {\n        console.error('Error loading user from storage:', error);\n        this.clearAuthData();\n      }\n    } else {\n      this.clearAuthData();\n    }\n  }\n\n  /**\n   * Configura el interceptor de axios para agregar el token automáticamente\n   */\n  setupAuthInterceptor() {\n    // Interceptor para requests\n    authAPI.interceptors.request.use(config => {\n      if (this.token && this.isTokenValid()) {\n        config.headers.Authorization = `Bearer ${this.token}`;\n      }\n      return config;\n    }, error => Promise.reject(error));\n\n    // Interceptor para responses\n    authAPI.interceptors.response.use(response => response, async error => {\n      var _error$response;\n      const originalRequest = error.config;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && !originalRequest._retry) {\n        originalRequest._retry = true;\n\n        // Intentar refresh token\n        try {\n          await this.refreshToken();\n          originalRequest.headers.Authorization = `Bearer ${this.token}`;\n          return authAPI(originalRequest);\n        } catch (refreshError) {\n          this.logout();\n          window.location.href = '/login';\n          return Promise.reject(refreshError);\n        }\n      }\n      return Promise.reject(error);\n    });\n  }\n\n  /**\n   * Verifica si el token actual es válido (no expirado)\n   */\n  isTokenValid() {\n    if (!this.token || !this.expiresAt) return false;\n    const now = Math.floor(Date.now() / 1000); // Tiempo actual en segundos\n    const expirationTime = parseInt(this.expiresAt);\n\n    // Considerar token inválido si expira en los próximos 5 minutos\n    return expirationTime > now + 300;\n  }\n\n  /**\n   * Registra un nuevo usuario\n   * @param {Object} userData - Datos del usuario (email, password, firstName, lastName)\n   */\n  async register(userData) {\n    try {\n      const response = await authAPI.post('/auth/register', userData);\n      const {\n        data\n      } = response.data;\n      this.saveAuthData(data);\n      toast.success('¡Registro exitoso! Bienvenido');\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      const message = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Error en el registro';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Inicia sesión con email y contraseña\n   * @param {Object} credentials - Credenciales (email, password)\n   */\n  async login(credentials) {\n    try {\n      const response = await authAPI.post('/auth/login', credentials);\n      const {\n        data\n      } = response.data;\n      this.saveAuthData(data);\n      toast.success(`¡Bienvenido de vuelta, ${data.user.first_name}!`);\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      const message = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Error en el login';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Cierra la sesión actual\n   */\n  async logout() {\n    try {\n      // Intentar notificar al servidor (opcional)\n      if (this.isAuthenticated()) {\n        await authAPI.post('/auth/logout');\n      }\n    } catch (error) {\n      // No importa si falla, igual limpiaremos el local storage\n      console.warn('Error during logout:', error);\n    } finally {\n      this.clearAuthData();\n      toast.success('Sesión cerrada correctamente');\n    }\n  }\n\n  /**\n   * Renueva el token JWT\n   */\n  async refreshToken() {\n    try {\n      const response = await authAPI.post('/auth/refresh');\n      const {\n        data\n      } = response.data;\n      this.saveAuthData(data);\n      return data;\n    } catch (error) {\n      this.clearAuthData();\n      throw new Error('Error renovando token');\n    }\n  }\n\n  /**\n   * Obtiene el perfil del usuario autenticado\n   */\n  async getProfile() {\n    try {\n      const response = await authAPI.get('/auth/profile');\n      const {\n        data\n      } = response.data;\n\n      // Actualizar datos del usuario en memoria y storage\n      this.user = data;\n      localStorage.setItem(USER_KEY, JSON.stringify(data));\n      return data;\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      const message = ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || 'Error obteniendo perfil';\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Cambia la contraseña del usuario\n   * @param {Object} passwordData - Datos de cambio de contraseña\n   */\n  async changePassword(passwordData) {\n    try {\n      await authAPI.put('/auth/change-password', passwordData);\n      toast.success('Contraseña cambiada exitosamente');\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      const message = ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.error) || 'Error cambiando contraseña';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Guarda los datos de autenticación en localStorage\n   * @param {Object} authData - Datos de autenticación del servidor\n   */\n  saveAuthData(authData) {\n    const {\n      token,\n      expires_at,\n      user\n    } = authData;\n    this.token = token;\n    this.user = user;\n    this.expiresAt = expires_at;\n    localStorage.setItem(TOKEN_KEY, token);\n    localStorage.setItem(USER_KEY, JSON.stringify(user));\n    localStorage.setItem(EXPIRES_AT_KEY, expires_at.toString());\n  }\n\n  /**\n   * Limpia todos los datos de autenticación\n   */\n  clearAuthData() {\n    this.token = null;\n    this.user = null;\n    this.expiresAt = null;\n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(USER_KEY);\n    localStorage.removeItem(EXPIRES_AT_KEY);\n  }\n\n  /**\n   * Verifica si el usuario está autenticado\n   */\n  isAuthenticated() {\n    return this.token && this.user && this.isTokenValid();\n  }\n\n  /**\n   * Obtiene el usuario actual\n   */\n  getCurrentUser() {\n    return this.user;\n  }\n\n  /**\n   * Obtiene el token actual\n   */\n  getToken() {\n    return this.token;\n  }\n\n  /**\n   * Obtiene headers de autorización para requests manuales\n   */\n  getAuthHeaders() {\n    if (this.token && this.isTokenValid()) {\n      return {\n        Authorization: `Bearer ${this.token}`\n      };\n    }\n    return {};\n  }\n\n  /**\n   * Verifica si el usuario tiene un rol específico (para futuras implementaciones)\n   */\n  hasRole(role) {\n    var _this$user, _this$user$roles;\n    return ((_this$user = this.user) === null || _this$user === void 0 ? void 0 : (_this$user$roles = _this$user.roles) === null || _this$user$roles === void 0 ? void 0 : _this$user$roles.includes(role)) || false;\n  }\n\n  /**\n   * Obtiene información de la sesión\n   */\n  getSessionInfo() {\n    return {\n      isAuthenticated: this.isAuthenticated(),\n      user: this.user,\n      expiresAt: this.expiresAt ? new Date(parseInt(this.expiresAt) * 1000) : null,\n      timeUntilExpiry: this.expiresAt ? parseInt(this.expiresAt) - Math.floor(Date.now() / 1000) : 0\n    };\n  }\n}\n\n// Crear instancia única\nconst authService = new AuthService();\n\n// Funciones de utilidad para facilitar el uso\nexport const authAPI_instance = authAPI; // Para requests manuales\nexport const isAuthenticated = () => authService.isAuthenticated();\nexport const getCurrentUser = () => authService.getCurrentUser();\nexport const getAuthHeaders = () => authService.getAuthHeaders();\nexport default authService;","map":{"version":3,"names":["axios","toast","API_BASE_URL","process","env","REACT_APP_API_URL","authAPI","create","baseURL","timeout","headers","TOKEN_KEY","USER_KEY","EXPIRES_AT_KEY","AuthService","constructor","token","localStorage","getItem","user","expiresAt","loadUserFromStorage","setupAuthInterceptor","isTokenValid","userData","JSON","parse","error","console","clearAuthData","interceptors","request","use","config","Authorization","Promise","reject","response","_error$response","originalRequest","status","_retry","refreshToken","refreshError","logout","window","location","href","now","Math","floor","Date","expirationTime","parseInt","register","post","data","saveAuthData","success","_error$response2","_error$response2$data","message","Error","login","credentials","first_name","_error$response3","_error$response3$data","isAuthenticated","warn","getProfile","get","setItem","stringify","_error$response4","_error$response4$data","changePassword","passwordData","put","_error$response5","_error$response5$data","authData","expires_at","toString","removeItem","getCurrentUser","getToken","getAuthHeaders","hasRole","role","_this$user","_this$user$roles","roles","includes","getSessionInfo","timeUntilExpiry","authService","authAPI_instance"],"sources":["/Users/pmelegatti/Development/Financial Resume/financial-resume-engine-frontend/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\nimport toast from '../utils/notifications';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\n\n// Crear instancia de axios para autenticación\nconst authAPI = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Claves para localStorage\nconst TOKEN_KEY = 'auth_token';\nconst USER_KEY = 'auth_user';\nconst EXPIRES_AT_KEY = 'auth_expires_at';\n\n/**\n * Servicio de autenticación\n */\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem(TOKEN_KEY);\n    this.user = null;\n    this.expiresAt = localStorage.getItem(EXPIRES_AT_KEY);\n    \n    // Cargar usuario si existe token válido\n    this.loadUserFromStorage();\n    \n    // Configurar interceptor de axios para agregar token automáticamente\n    this.setupAuthInterceptor();\n  }\n\n  /**\n   * Carga el usuario del localStorage si hay un token válido\n   */\n  loadUserFromStorage() {\n    if (this.token && this.isTokenValid()) {\n      try {\n        const userData = localStorage.getItem(USER_KEY);\n        if (userData) {\n          this.user = JSON.parse(userData);\n        }\n      } catch (error) {\n        console.error('Error loading user from storage:', error);\n        this.clearAuthData();\n      }\n    } else {\n      this.clearAuthData();\n    }\n  }\n\n  /**\n   * Configura el interceptor de axios para agregar el token automáticamente\n   */\n  setupAuthInterceptor() {\n    // Interceptor para requests\n    authAPI.interceptors.request.use(\n      (config) => {\n        if (this.token && this.isTokenValid()) {\n          config.headers.Authorization = `Bearer ${this.token}`;\n        }\n        return config;\n      },\n      (error) => Promise.reject(error)\n    );\n\n    // Interceptor para responses\n    authAPI.interceptors.response.use(\n      (response) => response,\n      async (error) => {\n        const originalRequest = error.config;\n\n        if (error.response?.status === 401 && !originalRequest._retry) {\n          originalRequest._retry = true;\n\n          // Intentar refresh token\n          try {\n            await this.refreshToken();\n            originalRequest.headers.Authorization = `Bearer ${this.token}`;\n            return authAPI(originalRequest);\n          } catch (refreshError) {\n            this.logout();\n            window.location.href = '/login';\n            return Promise.reject(refreshError);\n          }\n        }\n\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  /**\n   * Verifica si el token actual es válido (no expirado)\n   */\n  isTokenValid() {\n    if (!this.token || !this.expiresAt) return false;\n    \n    const now = Math.floor(Date.now() / 1000); // Tiempo actual en segundos\n    const expirationTime = parseInt(this.expiresAt);\n    \n    // Considerar token inválido si expira en los próximos 5 minutos\n    return expirationTime > (now + 300);\n  }\n\n  /**\n   * Registra un nuevo usuario\n   * @param {Object} userData - Datos del usuario (email, password, firstName, lastName)\n   */\n  async register(userData) {\n    try {\n      const response = await authAPI.post('/auth/register', userData);\n      const { data } = response.data;\n      \n      this.saveAuthData(data);\n      \n      toast.success('¡Registro exitoso! Bienvenido');\n      return { success: true, data };\n    } catch (error) {\n      const message = error.response?.data?.error || 'Error en el registro';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Inicia sesión con email y contraseña\n   * @param {Object} credentials - Credenciales (email, password)\n   */\n  async login(credentials) {\n    try {\n      const response = await authAPI.post('/auth/login', credentials);\n      const { data } = response.data;\n      \n      this.saveAuthData(data);\n      \n      toast.success(`¡Bienvenido de vuelta, ${data.user.first_name}!`);\n      return { success: true, data };\n    } catch (error) {\n      const message = error.response?.data?.error || 'Error en el login';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Cierra la sesión actual\n   */\n  async logout() {\n    try {\n      // Intentar notificar al servidor (opcional)\n      if (this.isAuthenticated()) {\n        await authAPI.post('/auth/logout');\n      }\n    } catch (error) {\n      // No importa si falla, igual limpiaremos el local storage\n      console.warn('Error during logout:', error);\n    } finally {\n      this.clearAuthData();\n      toast.success('Sesión cerrada correctamente');\n    }\n  }\n\n  /**\n   * Renueva el token JWT\n   */\n  async refreshToken() {\n    try {\n      const response = await authAPI.post('/auth/refresh');\n      const { data } = response.data;\n      \n      this.saveAuthData(data);\n      return data;\n    } catch (error) {\n      this.clearAuthData();\n      throw new Error('Error renovando token');\n    }\n  }\n\n  /**\n   * Obtiene el perfil del usuario autenticado\n   */\n  async getProfile() {\n    try {\n      const response = await authAPI.get('/auth/profile');\n      const { data } = response.data;\n      \n      // Actualizar datos del usuario en memoria y storage\n      this.user = data;\n      localStorage.setItem(USER_KEY, JSON.stringify(data));\n      \n      return data;\n    } catch (error) {\n      const message = error.response?.data?.error || 'Error obteniendo perfil';\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Cambia la contraseña del usuario\n   * @param {Object} passwordData - Datos de cambio de contraseña\n   */\n  async changePassword(passwordData) {\n    try {\n      await authAPI.put('/auth/change-password', passwordData);\n      toast.success('Contraseña cambiada exitosamente');\n      return { success: true };\n    } catch (error) {\n      const message = error.response?.data?.error || 'Error cambiando contraseña';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Guarda los datos de autenticación en localStorage\n   * @param {Object} authData - Datos de autenticación del servidor\n   */\n  saveAuthData(authData) {\n    const { token, expires_at, user } = authData;\n    \n    this.token = token;\n    this.user = user;\n    this.expiresAt = expires_at;\n    \n    localStorage.setItem(TOKEN_KEY, token);\n    localStorage.setItem(USER_KEY, JSON.stringify(user));\n    localStorage.setItem(EXPIRES_AT_KEY, expires_at.toString());\n  }\n\n  /**\n   * Limpia todos los datos de autenticación\n   */\n  clearAuthData() {\n    this.token = null;\n    this.user = null;\n    this.expiresAt = null;\n    \n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(USER_KEY);\n    localStorage.removeItem(EXPIRES_AT_KEY);\n  }\n\n  /**\n   * Verifica si el usuario está autenticado\n   */\n  isAuthenticated() {\n    return this.token && this.user && this.isTokenValid();\n  }\n\n  /**\n   * Obtiene el usuario actual\n   */\n  getCurrentUser() {\n    return this.user;\n  }\n\n  /**\n   * Obtiene el token actual\n   */\n  getToken() {\n    return this.token;\n  }\n\n  /**\n   * Obtiene headers de autorización para requests manuales\n   */\n  getAuthHeaders() {\n    if (this.token && this.isTokenValid()) {\n      return {\n        Authorization: `Bearer ${this.token}`,\n      };\n    }\n    return {};\n  }\n\n  /**\n   * Verifica si el usuario tiene un rol específico (para futuras implementaciones)\n   */\n  hasRole(role) {\n    return this.user?.roles?.includes(role) || false;\n  }\n\n  /**\n   * Obtiene información de la sesión\n   */\n  getSessionInfo() {\n    return {\n      isAuthenticated: this.isAuthenticated(),\n      user: this.user,\n      expiresAt: this.expiresAt ? new Date(parseInt(this.expiresAt) * 1000) : null,\n      timeUntilExpiry: this.expiresAt ? (parseInt(this.expiresAt) - Math.floor(Date.now() / 1000)) : 0,\n    };\n  }\n}\n\n// Crear instancia única\nconst authService = new AuthService();\n\n// Funciones de utilidad para facilitar el uso\nexport const authAPI_instance = authAPI; // Para requests manuales\nexport const isAuthenticated = () => authService.isAuthenticated();\nexport const getCurrentUser = () => authService.getCurrentUser();\nexport const getAuthHeaders = () => authService.getAuthHeaders();\n\nexport default authService; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}