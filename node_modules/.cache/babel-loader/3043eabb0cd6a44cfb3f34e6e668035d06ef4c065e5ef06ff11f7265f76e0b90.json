{"ast":null,"code":"import axios from 'axios';\nimport toast from 'react-hot-toast';\n\n// Configuración base de axios\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || '/api/v1',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Usuario mock para desarrollo (en producción vendría de autenticación)\nconst MOCK_USER_ID = 'user123';\n\n// Interceptor para agregar el header x-caller-id\napi.interceptors.request.use(config => {\n  config.headers['x-caller-id'] = MOCK_USER_ID;\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Interceptor para manejar errores globalmente\napi.interceptors.response.use(response => response, error => {\n  var _error$response, _error$response$data, _error$response2, _error$response3, _error$response4;\n  const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message || 'Error desconocido';\n  if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n    toast.error('No autorizado');\n  } else if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 404) {\n    toast.error('Recurso no encontrado');\n  } else if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) >= 500) {\n    toast.error('Error del servidor');\n  } else {\n    toast.error(message);\n  }\n  return Promise.reject(error);\n});\n\n// Servicios de Categorías\nexport const categoriesAPI = {\n  list: () => api.get('/categories'),\n  get: id => api.get(`/categories/${id}`),\n  create: data => api.post('/categories', {\n    ...data,\n    user_id: MOCK_USER_ID\n  }),\n  update: (id, data) => api.patch(`/categories/${id}`, {\n    ...data,\n    user_id: MOCK_USER_ID\n  }),\n  delete: id => api.delete(`/categories/${id}`)\n};\n\n// Servicios de Gastos\nexport const expensesAPI = {\n  list: () => api.get('/expenses'),\n  listUnpaid: () => api.get('/expenses/unpaid'),\n  get: (userId = MOCK_USER_ID, id) => api.get(`/expenses/${userId}/${id}`),\n  create: data => api.post('/expenses', {\n    ...data,\n    user_id: MOCK_USER_ID\n  }),\n  update: (userId = MOCK_USER_ID, id, data) => api.patch(`/expenses/${userId}/${id}`, {\n    ...data,\n    user_id: MOCK_USER_ID\n  }),\n  delete: (userId = MOCK_USER_ID, id) => api.delete(`/expenses/${userId}/${id}`)\n};\n\n// Servicios de Ingresos\nexport const incomesAPI = {\n  list: () => api.get('/incomes'),\n  get: (userId = MOCK_USER_ID, id) => api.get(`/incomes/${userId}/${id}`),\n  create: data => api.post('/incomes', {\n    ...data,\n    user_id: MOCK_USER_ID\n  }),\n  update: (userId = MOCK_USER_ID, id, data) => api.patch(`/incomes/${userId}/${id}`, {\n    ...data,\n    user_id: MOCK_USER_ID\n  }),\n  delete: (userId = MOCK_USER_ID, id) => api.delete(`/incomes/${userId}/${id}`)\n};\n\n// Servicios de Reportes\nexport const reportsAPI = {\n  generate: (startDate, endDate) => api.get('/reports', {\n    params: {\n      start_date: startDate,\n      end_date: endDate\n    }\n  })\n};\n\n// Nuevos servicios de Dashboard y Analytics\nexport const dashboardAPI = {\n  overview: params => api.get('/dashboard', {\n    params\n  })\n};\nexport const analyticsAPI = {\n  expenses: params => api.get('/expenses/summary', {\n    params\n  }),\n  incomes: params => api.get('/incomes/summary', {\n    params\n  }),\n  categories: params => api.get('/categories/analytics', {\n    params\n  })\n};\n\n// Utilidades\nexport const formatCurrency = amount => {\n  // Validar que amount sea un número válido\n  const numericAmount = Number(amount);\n  if (isNaN(numericAmount) || amount === null || amount === undefined) {\n    return '$0,00';\n  }\n  return new Intl.NumberFormat('es-AR', {\n    style: 'currency',\n    currency: 'ARS'\n  }).format(numericAmount);\n};\nexport const formatDate = date => {\n  // Validar que date sea válida\n  if (!date || date === null || date === undefined) {\n    return 'Fecha no disponible';\n  }\n  const dateObj = new Date(date);\n  if (isNaN(dateObj.getTime())) {\n    return 'Fecha inválida';\n  }\n  return new Intl.DateTimeFormat('es-AR', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  }).format(dateObj);\n};\nexport const formatPercentage = percentage => {\n  // Validar que percentage sea un número válido\n  const numericPercentage = Number(percentage);\n  if (isNaN(numericPercentage) || percentage === null || percentage === undefined) {\n    return '0.0%';\n  }\n  return `${numericPercentage.toFixed(1)}%`;\n};\nexport default api;","map":{"version":3,"names":["axios","toast","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","MOCK_USER_ID","interceptors","request","use","config","error","Promise","reject","response","_error$response","_error$response$data","_error$response2","_error$response3","_error$response4","message","data","status","categoriesAPI","list","get","id","post","user_id","update","patch","delete","expensesAPI","listUnpaid","userId","incomesAPI","reportsAPI","generate","startDate","endDate","params","start_date","end_date","dashboardAPI","overview","analyticsAPI","expenses","incomes","categories","formatCurrency","amount","numericAmount","Number","isNaN","undefined","Intl","NumberFormat","style","currency","format","formatDate","date","dateObj","Date","getTime","DateTimeFormat","year","month","day","formatPercentage","percentage","numericPercentage","toFixed"],"sources":["/Users/pmelegatti/Documents/Niloft/melegattipGitHub/financial-resume-engine-frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport toast from 'react-hot-toast';\n\n// Configuración base de axios\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || '/api/v1',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Usuario mock para desarrollo (en producción vendría de autenticación)\nconst MOCK_USER_ID = 'user123';\n\n// Interceptor para agregar el header x-caller-id\napi.interceptors.request.use(\n  (config) => {\n    config.headers['x-caller-id'] = MOCK_USER_ID;\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Interceptor para manejar errores globalmente\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const message = error.response?.data?.error || error.message || 'Error desconocido';\n    \n    if (error.response?.status === 401) {\n      toast.error('No autorizado');\n    } else if (error.response?.status === 404) {\n      toast.error('Recurso no encontrado');\n    } else if (error.response?.status >= 500) {\n      toast.error('Error del servidor');\n    } else {\n      toast.error(message);\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// Servicios de Categorías\nexport const categoriesAPI = {\n  list: () => api.get('/categories'),\n  get: (id) => api.get(`/categories/${id}`),\n  create: (data) => api.post('/categories', { ...data, user_id: MOCK_USER_ID }),\n  update: (id, data) => api.patch(`/categories/${id}`, { ...data, user_id: MOCK_USER_ID }),\n  delete: (id) => api.delete(`/categories/${id}`),\n};\n\n// Servicios de Gastos\nexport const expensesAPI = {\n  list: () => api.get('/expenses'),\n  listUnpaid: () => api.get('/expenses/unpaid'),\n  get: (userId = MOCK_USER_ID, id) => api.get(`/expenses/${userId}/${id}`),\n  create: (data) => api.post('/expenses', { ...data, user_id: MOCK_USER_ID }),\n  update: (userId = MOCK_USER_ID, id, data) => api.patch(`/expenses/${userId}/${id}`, { ...data, user_id: MOCK_USER_ID }),\n  delete: (userId = MOCK_USER_ID, id) => api.delete(`/expenses/${userId}/${id}`),\n};\n\n// Servicios de Ingresos\nexport const incomesAPI = {\n  list: () => api.get('/incomes'),\n  get: (userId = MOCK_USER_ID, id) => api.get(`/incomes/${userId}/${id}`),\n  create: (data) => api.post('/incomes', { ...data, user_id: MOCK_USER_ID }),\n  update: (userId = MOCK_USER_ID, id, data) => api.patch(`/incomes/${userId}/${id}`, { ...data, user_id: MOCK_USER_ID }),\n  delete: (userId = MOCK_USER_ID, id) => api.delete(`/incomes/${userId}/${id}`),\n};\n\n// Servicios de Reportes\nexport const reportsAPI = {\n  generate: (startDate, endDate) => \n    api.get('/reports', {\n      params: {\n        start_date: startDate,\n        end_date: endDate,\n      },\n    }),\n};\n\n// Nuevos servicios de Dashboard y Analytics\nexport const dashboardAPI = {\n  overview: (params) => api.get('/dashboard', { params }),\n};\n\nexport const analyticsAPI = {\n  expenses: (params) => api.get('/expenses/summary', { params }),\n  incomes: (params) => api.get('/incomes/summary', { params }),\n  categories: (params) => api.get('/categories/analytics', { params }),\n};\n\n// Utilidades\nexport const formatCurrency = (amount) => {\n  // Validar que amount sea un número válido\n  const numericAmount = Number(amount);\n  if (isNaN(numericAmount) || amount === null || amount === undefined) {\n    return '$0,00';\n  }\n  \n  return new Intl.NumberFormat('es-AR', {\n    style: 'currency',\n    currency: 'ARS',\n  }).format(numericAmount);\n};\n\nexport const formatDate = (date) => {\n  // Validar que date sea válida\n  if (!date || date === null || date === undefined) {\n    return 'Fecha no disponible';\n  }\n  \n  const dateObj = new Date(date);\n  if (isNaN(dateObj.getTime())) {\n    return 'Fecha inválida';\n  }\n  \n  return new Intl.DateTimeFormat('es-AR', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  }).format(dateObj);\n};\n\nexport const formatPercentage = (percentage) => {\n  // Validar que percentage sea un número válido\n  const numericPercentage = Number(percentage);\n  if (isNaN(numericPercentage) || percentage === null || percentage === undefined) {\n    return '0.0%';\n  }\n  \n  return `${numericPercentage.toFixed(1)}%`;\n};\n\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}