{"ast":null,"code":"import axios from 'axios';\nimport toast from '../utils/notifications';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\n\n// Crear instancia de axios para autenticaciÃ³n\nconst authAPI = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Claves para localStorage\nconst TOKEN_KEY = 'auth_token';\nconst USER_KEY = 'auth_user';\nconst EXPIRES_AT_KEY = 'auth_expires_at';\n\n/**\n * Servicio de autenticaciÃ³n\n */\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem(TOKEN_KEY);\n    this.user = null;\n    this.expiresAt = localStorage.getItem(EXPIRES_AT_KEY);\n\n    // Cargar usuario si existe token vÃ¡lido\n    this.loadUserFromStorage();\n\n    // Configurar interceptor de axios para agregar token automÃ¡ticamente\n    this.setupAuthInterceptor();\n  }\n\n  /**\n   * Carga el usuario del localStorage si hay un token vÃ¡lido\n   */\n  loadUserFromStorage() {\n    if (this.token && this.isTokenValid()) {\n      try {\n        const userData = localStorage.getItem(USER_KEY);\n        if (userData) {\n          this.user = JSON.parse(userData);\n        }\n      } catch (error) {\n        console.error('Error loading user from storage:', error);\n        this.clearAuthData();\n      }\n    } else {\n      this.clearAuthData();\n    }\n  }\n\n  /**\n   * Configura el interceptor de axios para agregar el token automÃ¡ticamente\n   */\n  setupAuthInterceptor() {\n    // Interceptor para requests\n    authAPI.interceptors.request.use(config => {\n      if (this.token && this.isTokenValid()) {\n        config.headers.Authorization = `Bearer ${this.token}`;\n      }\n      return config;\n    }, error => Promise.reject(error));\n\n    // Interceptor para responses\n    authAPI.interceptors.response.use(response => response, async error => {\n      var _error$response;\n      const originalRequest = error.config;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && !originalRequest._retry) {\n        originalRequest._retry = true;\n\n        // Intentar refresh token\n        try {\n          await this.refreshToken();\n          originalRequest.headers.Authorization = `Bearer ${this.token}`;\n          return authAPI(originalRequest);\n        } catch (refreshError) {\n          this.logout();\n          window.location.href = '/login';\n          return Promise.reject(refreshError);\n        }\n      }\n      return Promise.reject(error);\n    });\n  }\n\n  /**\n   * Verifica si el token actual es vÃ¡lido (no expirado)\n   */\n  isTokenValid() {\n    if (!this.token || !this.expiresAt) return false;\n    const now = Math.floor(Date.now() / 1000); // Tiempo actual en segundos\n    const expirationTime = parseInt(this.expiresAt);\n\n    // Considerar token invÃ¡lido si expira en los prÃ³ximos 5 minutos\n    return expirationTime > now + 300;\n  }\n\n  /**\n   * Registra un nuevo usuario\n   * @param {Object} userData - Datos del usuario (email, password, firstName, lastName)\n   */\n  async register(userData) {\n    try {\n      // Transformar datos del frontend al formato que espera el backend\n      const backendData = {\n        email: userData.email,\n        password: userData.password,\n        first_name: userData.firstName,\n        last_name: userData.lastName\n      };\n      console.log('ðŸ”§ Enviando datos de registro:', backendData);\n      const response = await authAPI.post('/auth/register', backendData);\n      const {\n        data\n      } = response.data;\n      this.saveAuthData(data);\n      toast.success('Â¡Registro exitoso! Bienvenido');\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      var _error$response2, _error$response3, _error$response3$data, _error$response4, _error$response4$data;\n      console.error('âŒ Error en registro:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      const message = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'Error en el registro';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Inicia sesiÃ³n con email y contraseÃ±a\n   * @param {Object} credentials - Credenciales (email, password)\n   */\n  async login(credentials) {\n    try {\n      const response = await authAPI.post('/auth/login', credentials);\n      const {\n        data\n      } = response.data;\n      this.saveAuthData(data);\n      toast.success(`Â¡Bienvenido de vuelta, ${data.user.first_name}!`);\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      const message = ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.error) || 'Error en el login';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Cierra la sesiÃ³n actual\n   */\n  async logout() {\n    try {\n      // Intentar notificar al servidor (opcional)\n      if (this.isAuthenticated()) {\n        await authAPI.post('/auth/logout');\n      }\n    } catch (error) {\n      // No importa si falla, igual limpiaremos el local storage\n      console.warn('Error during logout:', error);\n    } finally {\n      this.clearAuthData();\n      toast.success('SesiÃ³n cerrada correctamente');\n    }\n  }\n\n  /**\n   * Renueva el token JWT\n   */\n  async refreshToken() {\n    try {\n      const response = await authAPI.post('/auth/refresh');\n      const {\n        data\n      } = response.data;\n      this.saveAuthData(data);\n      return data;\n    } catch (error) {\n      this.clearAuthData();\n      throw new Error('Error renovando token');\n    }\n  }\n\n  /**\n   * Obtiene el perfil del usuario autenticado\n   */\n  async getProfile() {\n    try {\n      const response = await authAPI.get('/auth/profile');\n      const {\n        data\n      } = response.data;\n\n      // Actualizar datos del usuario en memoria y storage\n      this.user = data;\n      localStorage.setItem(USER_KEY, JSON.stringify(data));\n      return data;\n    } catch (error) {\n      var _error$response6, _error$response6$data;\n      const message = ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.error) || 'Error obteniendo perfil';\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Cambia la contraseÃ±a del usuario\n   * @param {Object} passwordData - Datos de cambio de contraseÃ±a\n   */\n  async changePassword(passwordData) {\n    try {\n      await authAPI.put('/auth/change-password', passwordData);\n      toast.success('ContraseÃ±a cambiada exitosamente');\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response7, _error$response7$data;\n      const message = ((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.error) || 'Error cambiando contraseÃ±a';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Guarda los datos de autenticaciÃ³n en localStorage\n   * @param {Object} authData - Datos de autenticaciÃ³n del servidor\n   */\n  saveAuthData(authData) {\n    const {\n      token,\n      expires_at,\n      user\n    } = authData;\n    this.token = token;\n    this.user = user;\n    this.expiresAt = expires_at;\n    localStorage.setItem(TOKEN_KEY, token);\n    localStorage.setItem(USER_KEY, JSON.stringify(user));\n    localStorage.setItem(EXPIRES_AT_KEY, expires_at.toString());\n  }\n\n  /**\n   * Limpia todos los datos de autenticaciÃ³n\n   */\n  clearAuthData() {\n    this.token = null;\n    this.user = null;\n    this.expiresAt = null;\n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(USER_KEY);\n    localStorage.removeItem(EXPIRES_AT_KEY);\n  }\n\n  /**\n   * Verifica si el usuario estÃ¡ autenticado\n   */\n  isAuthenticated() {\n    return this.token && this.user && this.isTokenValid();\n  }\n\n  /**\n   * Obtiene el usuario actual\n   */\n  getCurrentUser() {\n    return this.user;\n  }\n\n  /**\n   * Obtiene el token actual\n   */\n  getToken() {\n    return this.token;\n  }\n\n  /**\n   * Obtiene headers de autorizaciÃ³n para requests manuales\n   */\n  getAuthHeaders() {\n    if (this.token && this.isTokenValid()) {\n      return {\n        Authorization: `Bearer ${this.token}`\n      };\n    }\n    return {};\n  }\n\n  /**\n   * Verifica si el usuario tiene un rol especÃ­fico (para futuras implementaciones)\n   */\n  hasRole(role) {\n    var _this$user, _this$user$roles;\n    return ((_this$user = this.user) === null || _this$user === void 0 ? void 0 : (_this$user$roles = _this$user.roles) === null || _this$user$roles === void 0 ? void 0 : _this$user$roles.includes(role)) || false;\n  }\n\n  /**\n   * Obtiene informaciÃ³n de la sesiÃ³n\n   */\n  getSessionInfo() {\n    return {\n      isAuthenticated: this.isAuthenticated(),\n      user: this.user,\n      expiresAt: this.expiresAt ? new Date(parseInt(this.expiresAt) * 1000) : null,\n      timeUntilExpiry: this.expiresAt ? parseInt(this.expiresAt) - Math.floor(Date.now() / 1000) : 0\n    };\n  }\n}\n\n// Crear instancia Ãºnica\nconst authService = new AuthService();\n\n// Funciones de utilidad para facilitar el uso\nexport const authAPI_instance = authAPI; // Para requests manuales\nexport const isAuthenticated = () => authService.isAuthenticated();\nexport const getCurrentUser = () => authService.getCurrentUser();\nexport const getAuthHeaders = () => authService.getAuthHeaders();\nexport default authService;","map":{"version":3,"names":["axios","toast","API_BASE_URL","process","env","REACT_APP_API_URL","authAPI","create","baseURL","timeout","headers","TOKEN_KEY","USER_KEY","EXPIRES_AT_KEY","AuthService","constructor","token","localStorage","getItem","user","expiresAt","loadUserFromStorage","setupAuthInterceptor","isTokenValid","userData","JSON","parse","error","console","clearAuthData","interceptors","request","use","config","Authorization","Promise","reject","response","_error$response","originalRequest","status","_retry","refreshToken","refreshError","logout","window","location","href","now","Math","floor","Date","expirationTime","parseInt","register","backendData","email","password","first_name","firstName","last_name","lastName","log","post","data","saveAuthData","success","_error$response2","_error$response3","_error$response3$data","_error$response4","_error$response4$data","message","Error","login","credentials","_error$response5","_error$response5$data","isAuthenticated","warn","getProfile","get","setItem","stringify","_error$response6","_error$response6$data","changePassword","passwordData","put","_error$response7","_error$response7$data","authData","expires_at","toString","removeItem","getCurrentUser","getToken","getAuthHeaders","hasRole","role","_this$user","_this$user$roles","roles","includes","getSessionInfo","timeUntilExpiry","authService","authAPI_instance"],"sources":["/Users/pmelegatti/Development/Financial Resume/financial-resume-engine-frontend/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\nimport toast from '../utils/notifications';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api/v1';\n\n// Crear instancia de axios para autenticaciÃ³n\nconst authAPI = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Claves para localStorage\nconst TOKEN_KEY = 'auth_token';\nconst USER_KEY = 'auth_user';\nconst EXPIRES_AT_KEY = 'auth_expires_at';\n\n/**\n * Servicio de autenticaciÃ³n\n */\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem(TOKEN_KEY);\n    this.user = null;\n    this.expiresAt = localStorage.getItem(EXPIRES_AT_KEY);\n    \n    // Cargar usuario si existe token vÃ¡lido\n    this.loadUserFromStorage();\n    \n    // Configurar interceptor de axios para agregar token automÃ¡ticamente\n    this.setupAuthInterceptor();\n  }\n\n  /**\n   * Carga el usuario del localStorage si hay un token vÃ¡lido\n   */\n  loadUserFromStorage() {\n    if (this.token && this.isTokenValid()) {\n      try {\n        const userData = localStorage.getItem(USER_KEY);\n        if (userData) {\n          this.user = JSON.parse(userData);\n        }\n      } catch (error) {\n        console.error('Error loading user from storage:', error);\n        this.clearAuthData();\n      }\n    } else {\n      this.clearAuthData();\n    }\n  }\n\n  /**\n   * Configura el interceptor de axios para agregar el token automÃ¡ticamente\n   */\n  setupAuthInterceptor() {\n    // Interceptor para requests\n    authAPI.interceptors.request.use(\n      (config) => {\n        if (this.token && this.isTokenValid()) {\n          config.headers.Authorization = `Bearer ${this.token}`;\n        }\n        return config;\n      },\n      (error) => Promise.reject(error)\n    );\n\n    // Interceptor para responses\n    authAPI.interceptors.response.use(\n      (response) => response,\n      async (error) => {\n        const originalRequest = error.config;\n\n        if (error.response?.status === 401 && !originalRequest._retry) {\n          originalRequest._retry = true;\n\n          // Intentar refresh token\n          try {\n            await this.refreshToken();\n            originalRequest.headers.Authorization = `Bearer ${this.token}`;\n            return authAPI(originalRequest);\n          } catch (refreshError) {\n            this.logout();\n            window.location.href = '/login';\n            return Promise.reject(refreshError);\n          }\n        }\n\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  /**\n   * Verifica si el token actual es vÃ¡lido (no expirado)\n   */\n  isTokenValid() {\n    if (!this.token || !this.expiresAt) return false;\n    \n    const now = Math.floor(Date.now() / 1000); // Tiempo actual en segundos\n    const expirationTime = parseInt(this.expiresAt);\n    \n    // Considerar token invÃ¡lido si expira en los prÃ³ximos 5 minutos\n    return expirationTime > (now + 300);\n  }\n\n  /**\n   * Registra un nuevo usuario\n   * @param {Object} userData - Datos del usuario (email, password, firstName, lastName)\n   */\n  async register(userData) {\n    try {\n      // Transformar datos del frontend al formato que espera el backend\n      const backendData = {\n        email: userData.email,\n        password: userData.password,\n        first_name: userData.firstName,\n        last_name: userData.lastName\n      };\n      \n      console.log('ðŸ”§ Enviando datos de registro:', backendData);\n      \n      const response = await authAPI.post('/auth/register', backendData);\n      const { data } = response.data;\n      \n      this.saveAuthData(data);\n      \n      toast.success('Â¡Registro exitoso! Bienvenido');\n      return { success: true, data };\n    } catch (error) {\n      console.error('âŒ Error en registro:', error.response?.data || error.message);\n      const message = error.response?.data?.error || error.response?.data?.message || 'Error en el registro';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Inicia sesiÃ³n con email y contraseÃ±a\n   * @param {Object} credentials - Credenciales (email, password)\n   */\n  async login(credentials) {\n    try {\n      const response = await authAPI.post('/auth/login', credentials);\n      const { data } = response.data;\n      \n      this.saveAuthData(data);\n      \n      toast.success(`Â¡Bienvenido de vuelta, ${data.user.first_name}!`);\n      return { success: true, data };\n    } catch (error) {\n      const message = error.response?.data?.error || 'Error en el login';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Cierra la sesiÃ³n actual\n   */\n  async logout() {\n    try {\n      // Intentar notificar al servidor (opcional)\n      if (this.isAuthenticated()) {\n        await authAPI.post('/auth/logout');\n      }\n    } catch (error) {\n      // No importa si falla, igual limpiaremos el local storage\n      console.warn('Error during logout:', error);\n    } finally {\n      this.clearAuthData();\n      toast.success('SesiÃ³n cerrada correctamente');\n    }\n  }\n\n  /**\n   * Renueva el token JWT\n   */\n  async refreshToken() {\n    try {\n      const response = await authAPI.post('/auth/refresh');\n      const { data } = response.data;\n      \n      this.saveAuthData(data);\n      return data;\n    } catch (error) {\n      this.clearAuthData();\n      throw new Error('Error renovando token');\n    }\n  }\n\n  /**\n   * Obtiene el perfil del usuario autenticado\n   */\n  async getProfile() {\n    try {\n      const response = await authAPI.get('/auth/profile');\n      const { data } = response.data;\n      \n      // Actualizar datos del usuario en memoria y storage\n      this.user = data;\n      localStorage.setItem(USER_KEY, JSON.stringify(data));\n      \n      return data;\n    } catch (error) {\n      const message = error.response?.data?.error || 'Error obteniendo perfil';\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Cambia la contraseÃ±a del usuario\n   * @param {Object} passwordData - Datos de cambio de contraseÃ±a\n   */\n  async changePassword(passwordData) {\n    try {\n      await authAPI.put('/auth/change-password', passwordData);\n      toast.success('ContraseÃ±a cambiada exitosamente');\n      return { success: true };\n    } catch (error) {\n      const message = error.response?.data?.error || 'Error cambiando contraseÃ±a';\n      toast.error(message);\n      throw new Error(message);\n    }\n  }\n\n  /**\n   * Guarda los datos de autenticaciÃ³n en localStorage\n   * @param {Object} authData - Datos de autenticaciÃ³n del servidor\n   */\n  saveAuthData(authData) {\n    const { token, expires_at, user } = authData;\n    \n    this.token = token;\n    this.user = user;\n    this.expiresAt = expires_at;\n    \n    localStorage.setItem(TOKEN_KEY, token);\n    localStorage.setItem(USER_KEY, JSON.stringify(user));\n    localStorage.setItem(EXPIRES_AT_KEY, expires_at.toString());\n  }\n\n  /**\n   * Limpia todos los datos de autenticaciÃ³n\n   */\n  clearAuthData() {\n    this.token = null;\n    this.user = null;\n    this.expiresAt = null;\n    \n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(USER_KEY);\n    localStorage.removeItem(EXPIRES_AT_KEY);\n  }\n\n  /**\n   * Verifica si el usuario estÃ¡ autenticado\n   */\n  isAuthenticated() {\n    return this.token && this.user && this.isTokenValid();\n  }\n\n  /**\n   * Obtiene el usuario actual\n   */\n  getCurrentUser() {\n    return this.user;\n  }\n\n  /**\n   * Obtiene el token actual\n   */\n  getToken() {\n    return this.token;\n  }\n\n  /**\n   * Obtiene headers de autorizaciÃ³n para requests manuales\n   */\n  getAuthHeaders() {\n    if (this.token && this.isTokenValid()) {\n      return {\n        Authorization: `Bearer ${this.token}`,\n      };\n    }\n    return {};\n  }\n\n  /**\n   * Verifica si el usuario tiene un rol especÃ­fico (para futuras implementaciones)\n   */\n  hasRole(role) {\n    return this.user?.roles?.includes(role) || false;\n  }\n\n  /**\n   * Obtiene informaciÃ³n de la sesiÃ³n\n   */\n  getSessionInfo() {\n    return {\n      isAuthenticated: this.isAuthenticated(),\n      user: this.user,\n      expiresAt: this.expiresAt ? new Date(parseInt(this.expiresAt) * 1000) : null,\n      timeUntilExpiry: this.expiresAt ? (parseInt(this.expiresAt) - Math.floor(Date.now() / 1000)) : 0,\n    };\n  }\n}\n\n// Crear instancia Ãºnica\nconst authService = new AuthService();\n\n// Funciones de utilidad para facilitar el uso\nexport const authAPI_instance = authAPI; // Para requests manuales\nexport const isAuthenticated = () => authService.isAuthenticated();\nexport const getCurrentUser = () => authService.getCurrentUser();\nexport const getAuthHeaders = () => authService.getAuthHeaders();\n\nexport default authService; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}