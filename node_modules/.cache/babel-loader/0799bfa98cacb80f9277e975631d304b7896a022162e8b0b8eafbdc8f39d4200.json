{"ast":null,"code":"import { dashboardAPI, analyticsAPI, expensesAPI, incomesAPI, categoriesAPI } from './api';\nimport toast from 'react-hot-toast';\n\n/**\n * Servicio centralizado para manejo optimizado de datos\n */\nclass DataService {\n  constructor() {\n    this.cache = new Map();\n    this.cacheTimeout = 5 * 60 * 1000; // 5 minutos\n  }\n\n  /**\n   * Genera una clave de cache basada en los par√°metros\n   */\n  getCacheKey(endpoint, params = {}) {\n    const sortedParams = Object.keys(params).sort().reduce((result, key) => {\n      result[key] = params[key];\n      return result;\n    }, {});\n    return `${endpoint}_${JSON.stringify(sortedParams)}`;\n  }\n\n  /**\n   * Verifica si los datos en cache son v√°lidos\n   */\n  isCacheValid(cacheEntry) {\n    return cacheEntry && Date.now() - cacheEntry.timestamp < this.cacheTimeout;\n  }\n\n  /**\n   * Obtiene datos del cache o hace la llamada a la API\n   */\n  async getCachedData(cacheKey, apiCall) {\n    const cachedData = this.cache.get(cacheKey);\n    if (this.isCacheValid(cachedData)) {\n      console.log(`üì¶ Usando datos del cache para: ${cacheKey}`);\n      return cachedData.data;\n    }\n    console.log(`üåê Llamando API para: ${cacheKey}`);\n    const data = await apiCall();\n\n    // Guardar en cache\n    this.cache.set(cacheKey, {\n      data,\n      timestamp: Date.now()\n    });\n    return data;\n  }\n\n  /**\n   * Limpia el cache (√∫til despu√©s de crear/actualizar/eliminar datos)\n   */\n  clearCache(pattern = null) {\n    if (pattern) {\n      // Limpiar solo entradas que coincidan con el patr√≥n\n      for (const [key] of this.cache.entries()) {\n        if (key.includes(pattern)) {\n          this.cache.delete(key);\n        }\n      }\n    } else {\n      // Limpiar todo el cache\n      this.cache.clear();\n    }\n    console.log(`üßπ Cache limpiado${pattern ? ` para patr√≥n: ${pattern}` : ' completamente'}`);\n  }\n\n  /**\n   * Carga datos del dashboard de forma optimizada\n   */\n  async loadDashboardData(filterParams = {}, useOptimizedEndpoints = true) {\n    try {\n      if (useOptimizedEndpoints) {\n        console.log('üöÄ Cargando dashboard con endpoints optimizados...');\n\n        // Llamadas paralelas con cache\n        const [dashboard, expenses, incomes, categories, categoriesDropdown] = await Promise.all([this.getCachedData(this.getCacheKey('dashboard', filterParams), () => dashboardAPI.overview(filterParams)), this.getCachedData(this.getCacheKey('analytics_expenses', {\n          ...filterParams,\n          sort: 'date',\n          order: 'desc',\n          limit: 50\n        }), () => analyticsAPI.expenses({\n          ...filterParams,\n          sort: 'date',\n          order: 'desc',\n          limit: 50\n        })), this.getCachedData(this.getCacheKey('analytics_incomes', {\n          ...filterParams,\n          sort: 'date',\n          order: 'desc',\n          limit: 50\n        }), () => analyticsAPI.incomes({\n          ...filterParams,\n          sort: 'date',\n          order: 'desc',\n          limit: 50\n        })), this.getCachedData(this.getCacheKey('analytics_categories', filterParams), () => analyticsAPI.categories(filterParams)), this.getCachedData(this.getCacheKey('categories_list', {}), () => categoriesAPI.list())]);\n        return this.normalizeOptimizedData(dashboard.data, expenses.data, incomes.data, categories.data, categoriesDropdown.data);\n      } else {\n        return await this.loadDashboardDataLegacy(filterParams);\n      }\n    } catch (error) {\n      console.warn('‚ö†Ô∏è Error con endpoints optimizados, usando fallback:', error.message);\n      return await this.loadDashboardDataLegacy(filterParams);\n    }\n  }\n\n  /**\n   * Carga datos usando endpoints legacy (fallback)\n   */\n  async loadDashboardDataLegacy(filterParams = {}) {\n    console.log('üîÑ Cargando dashboard con endpoints legacy...');\n    const [expenses, incomes, categories] = await Promise.all([this.getCachedData(this.getCacheKey('expenses_legacy', {}), () => expensesAPI.list()), this.getCachedData(this.getCacheKey('incomes_legacy', {}), () => incomesAPI.list()), this.getCachedData(this.getCacheKey('categories_legacy', {}), () => categoriesAPI.list())]);\n    return this.normalizeLegacyData(expenses.data, incomes.data, categories.data, filterParams);\n  }\n\n  /**\n   * Normaliza datos de endpoints optimizados\n   */\n  normalizeOptimizedData(dashboard, expenses, incomes, categories, categoriesDropdown) {\n    var _dashboard$Metrics, _dashboard$Metrics2, _dashboard$Metrics3;\n    const normalizedExpenses = (expenses.Expenses || []).map(expense => ({\n      id: expense.ID || expense.id,\n      user_id: expense.UserID || expense.user_id,\n      amount: expense.Amount || expense.amount,\n      amount_paid: expense.AmountPaid || expense.amount_paid,\n      pending_amount: expense.PendingAmount || expense.pending_amount,\n      description: expense.Description || expense.description,\n      category_id: expense.CategoryID || expense.category_id,\n      paid: expense.Paid !== undefined ? expense.Paid : expense.paid,\n      due_date: expense.DueDate || expense.due_date,\n      percentage: expense.PercentageOfIncome || expense.percentage,\n      created_at: expense.CreatedAt || expense.created_at,\n      updated_at: expense.UpdatedAt || expense.updated_at\n    }));\n    const normalizedIncomes = (incomes.Incomes || []).map(income => ({\n      id: income.ID || income.id,\n      user_id: income.UserID || income.user_id,\n      amount: income.Amount || income.amount,\n      description: income.Description || income.description,\n      category_id: income.CategoryID || income.category_id,\n      created_at: income.CreatedAt || income.created_at,\n      updated_at: income.UpdatedAt || income.updated_at\n    }));\n    const categoriesForDropdown = (categoriesDropdown === null || categoriesDropdown === void 0 ? void 0 : categoriesDropdown.data) || categoriesDropdown || [];\n    return {\n      // M√©tricas del dashboard (pre-calculadas por backend)\n      totalIncome: ((_dashboard$Metrics = dashboard.Metrics) === null || _dashboard$Metrics === void 0 ? void 0 : _dashboard$Metrics.TotalIncome) || 0,\n      totalExpenses: ((_dashboard$Metrics2 = dashboard.Metrics) === null || _dashboard$Metrics2 === void 0 ? void 0 : _dashboard$Metrics2.TotalExpenses) || 0,\n      balance: ((_dashboard$Metrics3 = dashboard.Metrics) === null || _dashboard$Metrics3 === void 0 ? void 0 : _dashboard$Metrics3.Balance) || 0,\n      // Transacciones normalizadas\n      expenses: normalizedExpenses,\n      incomes: normalizedIncomes,\n      // Categor√≠as para dropdown\n      categories: Array.isArray(categoriesForDropdown) ? categoriesForDropdown : [],\n      // Datos adicionales del backend\n      dashboardMetrics: dashboard.Metrics || {},\n      expensesSummary: expenses.Summary || {},\n      categoriesAnalytics: categories.Categories || [],\n      // Datos sin filtrar\n      allExpenses: normalizedExpenses,\n      allIncomes: normalizedIncomes,\n      // Metadata\n      source: 'optimized',\n      timestamp: Date.now()\n    };\n  }\n\n  /**\n   * Normaliza datos de endpoints legacy\n   */\n  normalizeLegacyData(expenses, incomes, categories, filterParams) {\n    // Extraer datos de las respuestas\n    const expensesData = (expenses === null || expenses === void 0 ? void 0 : expenses.expenses) || expenses || [];\n    const incomesData = (incomes === null || incomes === void 0 ? void 0 : incomes.incomes) || incomes || [];\n    const categoriesData = (categories === null || categories === void 0 ? void 0 : categories.data) || categories || [];\n    const expensesArray = Array.isArray(expensesData) ? expensesData : [];\n    const incomesArray = Array.isArray(incomesData) ? incomesData : [];\n    const categoriesArray = Array.isArray(categoriesData) ? categoriesData : [];\n\n    // Filtrar datos client-side si hay filtros activos\n    const filteredExpenses = this.filterDataByMonthAndYear(expensesArray, filterParams.month, filterParams.year);\n    const filteredIncomes = this.filterDataByMonthAndYear(incomesArray, filterParams.month, filterParams.year);\n    const totalExpenses = filteredExpenses.reduce((sum, expense) => sum + expense.amount, 0);\n    const totalIncome = filteredIncomes.reduce((sum, income) => sum + income.amount, 0);\n    return {\n      totalIncome,\n      totalExpenses,\n      balance: totalIncome - totalExpenses,\n      expenses: filteredExpenses,\n      incomes: filteredIncomes,\n      categories: categoriesArray,\n      dashboardMetrics: {},\n      expensesSummary: {},\n      categoriesAnalytics: [],\n      // Datos sin filtrar\n      allExpenses: expensesArray,\n      allIncomes: incomesArray,\n      // Metadata\n      source: 'legacy',\n      timestamp: Date.now()\n    };\n  }\n\n  /**\n   * Filtra datos por mes y a√±o (client-side)\n   */\n  filterDataByMonthAndYear(dataArray, monthFilter, yearFilter) {\n    if (!Array.isArray(dataArray)) return [];\n    return dataArray.filter(item => {\n      if (!item.created_at) return true;\n      const itemDate = new Date(item.created_at);\n      const itemYear = itemDate.getFullYear();\n      const itemMonth = itemDate.getMonth() + 1;\n      if (yearFilter && itemYear !== parseInt(yearFilter)) return false;\n      if (monthFilter && itemMonth !== parseInt(monthFilter)) return false;\n      return true;\n    });\n  }\n\n  /**\n   * Invalida cache despu√©s de operaciones CRUD\n   */\n  invalidateAfterMutation(type) {\n    switch (type) {\n      case 'expense':\n        this.clearCache('expenses');\n        this.clearCache('analytics_expenses');\n        this.clearCache('dashboard');\n        break;\n      case 'income':\n        this.clearCache('incomes');\n        this.clearCache('analytics_incomes');\n        this.clearCache('dashboard');\n        break;\n      case 'category':\n        this.clearCache('categories');\n        this.clearCache('analytics_categories');\n        break;\n      default:\n        this.clearCache();\n      // Limpiar todo\n    }\n  }\n}\n\n// Crear instancia singleton\nconst dataService = new DataService();\nexport default dataService;","map":{"version":3,"names":["dashboardAPI","analyticsAPI","expensesAPI","incomesAPI","categoriesAPI","toast","DataService","constructor","cache","Map","cacheTimeout","getCacheKey","endpoint","params","sortedParams","Object","keys","sort","reduce","result","key","JSON","stringify","isCacheValid","cacheEntry","Date","now","timestamp","getCachedData","cacheKey","apiCall","cachedData","get","console","log","data","set","clearCache","pattern","entries","includes","delete","clear","loadDashboardData","filterParams","useOptimizedEndpoints","dashboard","expenses","incomes","categories","categoriesDropdown","Promise","all","overview","order","limit","list","normalizeOptimizedData","loadDashboardDataLegacy","error","warn","message","normalizeLegacyData","_dashboard$Metrics","_dashboard$Metrics2","_dashboard$Metrics3","normalizedExpenses","Expenses","map","expense","id","ID","user_id","UserID","amount","Amount","amount_paid","AmountPaid","pending_amount","PendingAmount","description","Description","category_id","CategoryID","paid","Paid","undefined","due_date","DueDate","percentage","PercentageOfIncome","created_at","CreatedAt","updated_at","UpdatedAt","normalizedIncomes","Incomes","income","categoriesForDropdown","totalIncome","Metrics","TotalIncome","totalExpenses","TotalExpenses","balance","Balance","Array","isArray","dashboardMetrics","expensesSummary","Summary","categoriesAnalytics","Categories","allExpenses","allIncomes","source","expensesData","incomesData","categoriesData","expensesArray","incomesArray","categoriesArray","filteredExpenses","filterDataByMonthAndYear","month","year","filteredIncomes","sum","dataArray","monthFilter","yearFilter","filter","item","itemDate","itemYear","getFullYear","itemMonth","getMonth","parseInt","invalidateAfterMutation","type","dataService"],"sources":["/Users/pmelegatti/Development/Financial Resume/financial-resume-engine-frontend/src/services/dataService.js"],"sourcesContent":["import { dashboardAPI, analyticsAPI, expensesAPI, incomesAPI, categoriesAPI } from './api';\nimport toast from 'react-hot-toast';\n\n/**\n * Servicio centralizado para manejo optimizado de datos\n */\nclass DataService {\n  constructor() {\n    this.cache = new Map();\n    this.cacheTimeout = 5 * 60 * 1000; // 5 minutos\n  }\n\n  /**\n   * Genera una clave de cache basada en los par√°metros\n   */\n  getCacheKey(endpoint, params = {}) {\n    const sortedParams = Object.keys(params)\n      .sort()\n      .reduce((result, key) => {\n        result[key] = params[key];\n        return result;\n      }, {});\n    \n    return `${endpoint}_${JSON.stringify(sortedParams)}`;\n  }\n\n  /**\n   * Verifica si los datos en cache son v√°lidos\n   */\n  isCacheValid(cacheEntry) {\n    return cacheEntry && (Date.now() - cacheEntry.timestamp) < this.cacheTimeout;\n  }\n\n  /**\n   * Obtiene datos del cache o hace la llamada a la API\n   */\n  async getCachedData(cacheKey, apiCall) {\n    const cachedData = this.cache.get(cacheKey);\n    \n    if (this.isCacheValid(cachedData)) {\n      console.log(`üì¶ Usando datos del cache para: ${cacheKey}`);\n      return cachedData.data;\n    }\n\n    console.log(`üåê Llamando API para: ${cacheKey}`);\n    const data = await apiCall();\n    \n    // Guardar en cache\n    this.cache.set(cacheKey, {\n      data,\n      timestamp: Date.now()\n    });\n\n    return data;\n  }\n\n  /**\n   * Limpia el cache (√∫til despu√©s de crear/actualizar/eliminar datos)\n   */\n  clearCache(pattern = null) {\n    if (pattern) {\n      // Limpiar solo entradas que coincidan con el patr√≥n\n      for (const [key] of this.cache.entries()) {\n        if (key.includes(pattern)) {\n          this.cache.delete(key);\n        }\n      }\n    } else {\n      // Limpiar todo el cache\n      this.cache.clear();\n    }\n    console.log(`üßπ Cache limpiado${pattern ? ` para patr√≥n: ${pattern}` : ' completamente'}`);\n  }\n\n  /**\n   * Carga datos del dashboard de forma optimizada\n   */\n  async loadDashboardData(filterParams = {}, useOptimizedEndpoints = true) {\n    try {\n      if (useOptimizedEndpoints) {\n        console.log('üöÄ Cargando dashboard con endpoints optimizados...');\n        \n        // Llamadas paralelas con cache\n        const [dashboard, expenses, incomes, categories, categoriesDropdown] = await Promise.all([\n          this.getCachedData(\n            this.getCacheKey('dashboard', filterParams),\n            () => dashboardAPI.overview(filterParams)\n          ),\n          this.getCachedData(\n            this.getCacheKey('analytics_expenses', { ...filterParams, sort: 'date', order: 'desc', limit: 50 }),\n            () => analyticsAPI.expenses({ ...filterParams, sort: 'date', order: 'desc', limit: 50 })\n          ),\n          this.getCachedData(\n            this.getCacheKey('analytics_incomes', { ...filterParams, sort: 'date', order: 'desc', limit: 50 }),\n            () => analyticsAPI.incomes({ ...filterParams, sort: 'date', order: 'desc', limit: 50 })\n          ),\n          this.getCachedData(\n            this.getCacheKey('analytics_categories', filterParams),\n            () => analyticsAPI.categories(filterParams)\n          ),\n          this.getCachedData(\n            this.getCacheKey('categories_list', {}),\n            () => categoriesAPI.list()\n          )\n        ]);\n\n        return this.normalizeOptimizedData(dashboard.data, expenses.data, incomes.data, categories.data, categoriesDropdown.data);\n      } else {\n        return await this.loadDashboardDataLegacy(filterParams);\n      }\n    } catch (error) {\n      console.warn('‚ö†Ô∏è Error con endpoints optimizados, usando fallback:', error.message);\n      return await this.loadDashboardDataLegacy(filterParams);\n    }\n  }\n\n  /**\n   * Carga datos usando endpoints legacy (fallback)\n   */\n  async loadDashboardDataLegacy(filterParams = {}) {\n    console.log('üîÑ Cargando dashboard con endpoints legacy...');\n    \n    const [expenses, incomes, categories] = await Promise.all([\n      this.getCachedData(\n        this.getCacheKey('expenses_legacy', {}),\n        () => expensesAPI.list()\n      ),\n      this.getCachedData(\n        this.getCacheKey('incomes_legacy', {}),\n        () => incomesAPI.list()\n      ),\n      this.getCachedData(\n        this.getCacheKey('categories_legacy', {}),\n        () => categoriesAPI.list()\n      )\n    ]);\n\n    return this.normalizeLegacyData(expenses.data, incomes.data, categories.data, filterParams);\n  }\n\n  /**\n   * Normaliza datos de endpoints optimizados\n   */\n  normalizeOptimizedData(dashboard, expenses, incomes, categories, categoriesDropdown) {\n    const normalizedExpenses = (expenses.Expenses || []).map(expense => ({\n      id: expense.ID || expense.id,\n      user_id: expense.UserID || expense.user_id,\n      amount: expense.Amount || expense.amount,\n      amount_paid: expense.AmountPaid || expense.amount_paid,\n      pending_amount: expense.PendingAmount || expense.pending_amount,\n      description: expense.Description || expense.description,\n      category_id: expense.CategoryID || expense.category_id,\n      paid: expense.Paid !== undefined ? expense.Paid : expense.paid,\n      due_date: expense.DueDate || expense.due_date,\n      percentage: expense.PercentageOfIncome || expense.percentage,\n      created_at: expense.CreatedAt || expense.created_at,\n      updated_at: expense.UpdatedAt || expense.updated_at\n    }));\n\n    const normalizedIncomes = (incomes.Incomes || []).map(income => ({\n      id: income.ID || income.id,\n      user_id: income.UserID || income.user_id,\n      amount: income.Amount || income.amount,\n      description: income.Description || income.description,\n      category_id: income.CategoryID || income.category_id,\n      created_at: income.CreatedAt || income.created_at,\n      updated_at: income.UpdatedAt || income.updated_at\n    }));\n\n    const categoriesForDropdown = categoriesDropdown?.data || categoriesDropdown || [];\n\n    return {\n      // M√©tricas del dashboard (pre-calculadas por backend)\n      totalIncome: dashboard.Metrics?.TotalIncome || 0,\n      totalExpenses: dashboard.Metrics?.TotalExpenses || 0,\n      balance: dashboard.Metrics?.Balance || 0,\n      \n      // Transacciones normalizadas\n      expenses: normalizedExpenses,\n      incomes: normalizedIncomes,\n      \n      // Categor√≠as para dropdown\n      categories: Array.isArray(categoriesForDropdown) ? categoriesForDropdown : [],\n      \n      // Datos adicionales del backend\n      dashboardMetrics: dashboard.Metrics || {},\n      expensesSummary: expenses.Summary || {},\n      categoriesAnalytics: categories.Categories || [],\n      \n      // Datos sin filtrar\n      allExpenses: normalizedExpenses,\n      allIncomes: normalizedIncomes,\n      \n      // Metadata\n      source: 'optimized',\n      timestamp: Date.now()\n    };\n  }\n\n  /**\n   * Normaliza datos de endpoints legacy\n   */\n  normalizeLegacyData(expenses, incomes, categories, filterParams) {\n    // Extraer datos de las respuestas\n    const expensesData = expenses?.expenses || expenses || [];\n    const incomesData = incomes?.incomes || incomes || [];\n    const categoriesData = categories?.data || categories || [];\n    \n    const expensesArray = Array.isArray(expensesData) ? expensesData : [];\n    const incomesArray = Array.isArray(incomesData) ? incomesData : [];\n    const categoriesArray = Array.isArray(categoriesData) ? categoriesData : [];\n\n    // Filtrar datos client-side si hay filtros activos\n    const filteredExpenses = this.filterDataByMonthAndYear(expensesArray, filterParams.month, filterParams.year);\n    const filteredIncomes = this.filterDataByMonthAndYear(incomesArray, filterParams.month, filterParams.year);\n\n    const totalExpenses = filteredExpenses.reduce((sum, expense) => sum + expense.amount, 0);\n    const totalIncome = filteredIncomes.reduce((sum, income) => sum + income.amount, 0);\n\n    return {\n      totalIncome,\n      totalExpenses,\n      balance: totalIncome - totalExpenses,\n      expenses: filteredExpenses,\n      incomes: filteredIncomes,\n      categories: categoriesArray,\n      dashboardMetrics: {},\n      expensesSummary: {},\n      categoriesAnalytics: [],\n      \n      // Datos sin filtrar\n      allExpenses: expensesArray,\n      allIncomes: incomesArray,\n      \n      // Metadata\n      source: 'legacy',\n      timestamp: Date.now()\n    };\n  }\n\n  /**\n   * Filtra datos por mes y a√±o (client-side)\n   */\n  filterDataByMonthAndYear(dataArray, monthFilter, yearFilter) {\n    if (!Array.isArray(dataArray)) return [];\n    \n    return dataArray.filter(item => {\n      if (!item.created_at) return true;\n      \n      const itemDate = new Date(item.created_at);\n      const itemYear = itemDate.getFullYear();\n      const itemMonth = itemDate.getMonth() + 1;\n      \n      if (yearFilter && itemYear !== parseInt(yearFilter)) return false;\n      if (monthFilter && itemMonth !== parseInt(monthFilter)) return false;\n      \n      return true;\n    });\n  }\n\n  /**\n   * Invalida cache despu√©s de operaciones CRUD\n   */\n  invalidateAfterMutation(type) {\n    switch (type) {\n      case 'expense':\n        this.clearCache('expenses');\n        this.clearCache('analytics_expenses');\n        this.clearCache('dashboard');\n        break;\n      case 'income':\n        this.clearCache('incomes');\n        this.clearCache('analytics_incomes');\n        this.clearCache('dashboard');\n        break;\n      case 'category':\n        this.clearCache('categories');\n        this.clearCache('analytics_categories');\n        break;\n      default:\n        this.clearCache(); // Limpiar todo\n    }\n  }\n}\n\n// Crear instancia singleton\nconst dataService = new DataService();\n\nexport default dataService; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}