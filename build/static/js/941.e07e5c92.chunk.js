"use strict";(self.webpackChunkfinancial_resume_frontend=self.webpackChunkfinancial_resume_frontend||[]).push([[941],{4505:(e,s,t)=>{t.d(s,{Ee:()=>h,Yq:()=>u,_2:()=>m,fm:()=>o,rh:()=>g,sh:()=>d,t_:()=>l,vv:()=>p,zZ:()=>x});var a=t(2555),r=t(9722),n=t(3768);const c=r.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}}),i="user123";c.interceptors.request.use((e=>(e.headers["x-caller-id"]=i,e)),(e=>Promise.reject(e))),c.interceptors.response.use((e=>e),(e=>{var s,t,a,r,c;const i=(null===(s=e.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.error)||e.message||"Error desconocido";return 401===(null===(a=e.response)||void 0===a?void 0:a.status)?n.Ay.error("No autorizado"):404===(null===(r=e.response)||void 0===r?void 0:r.status)?n.Ay.error("Recurso no encontrado"):(null===(c=e.response)||void 0===c?void 0:c.status)>=500?n.Ay.error("Error del servidor"):n.Ay.error(i),Promise.reject(e)}));const o={list:()=>c.get("/categories"),get:e=>c.get("/categories/".concat(e)),create:e=>c.post("/categories",(0,a.A)((0,a.A)({},e),{},{user_id:i})),update:(e,s)=>c.patch("/categories/".concat(e),(0,a.A)((0,a.A)({},s),{},{user_id:i})),delete:e=>c.delete("/categories/".concat(e))},d={list:()=>c.get("/expenses"),listUnpaid:()=>c.get("/expenses/unpaid"),get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1?arguments[1]:void 0;return c.get("/expenses/".concat(e,"/").concat(s))},create:e=>c.post("/expenses",(0,a.A)((0,a.A)({},e),{},{user_id:i})),update:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return c.patch("/expenses/".concat(e,"/").concat(s),(0,a.A)((0,a.A)({},t),{},{user_id:i}))},delete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1?arguments[1]:void 0;return c.delete("/expenses/".concat(e,"/").concat(s))}},l={list:()=>c.get("/incomes"),get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1?arguments[1]:void 0;return c.get("/incomes/".concat(e,"/").concat(s))},create:e=>c.post("/incomes",(0,a.A)((0,a.A)({},e),{},{user_id:i})),update:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return c.patch("/incomes/".concat(e,"/").concat(s),(0,a.A)((0,a.A)({},t),{},{user_id:i}))},delete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1?arguments[1]:void 0;return c.delete("/incomes/".concat(e,"/").concat(s))}},m={generate:(e,s)=>c.get("/reports",{params:{start_date:e,end_date:s}})},x={overview:e=>c.get("/dashboard",{params:e})},g={expenses:e=>c.get("/expenses/summary",{params:e}),incomes:e=>c.get("/incomes/summary",{params:e}),categories:e=>c.get("/categories/analytics",{params:e})},p=e=>{const s=Number(e);return isNaN(s)||null===e||void 0===e?"$0,00":new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(s)},u=e=>{if(!e||null===e||void 0===e)return"Fecha no disponible";const s=new Date(e);return isNaN(s.getTime())?"Fecha inv\xe1lida":new Intl.DateTimeFormat("es-AR",{year:"numeric",month:"long",day:"numeric"}).format(s)},h=e=>{const s=Number(e);return isNaN(s)||null===e||void 0===e?"0.0%":"".concat(s.toFixed(1),"%")}},4941:(e,s,t)=>{t.r(s),t.d(s,{default:()=>D});var a=t(2555),r=t(5043),n=t(3062),c=t(7010),i=t(7899),o=t(4919),d=t(3782),l=t(8646),m=t(4319),x=t(9875),g=t(2649),p=t(108),u=t(877),h=t(7734),f=t(2185),y=t(6026),j=t(6150),N=t(3839),b=t(163),v=t(4240),_=t(7869),w=t(4505),A=t(8651),T=t(4957),I=t(3768),S=t(579);const D=()=>{const[e,s]=(0,r.useState)(!0),[t,D]=(0,r.useState)("fecha"),[k,E]=(0,r.useState)({totalIncome:0,totalExpenses:0,balance:0,expenses:[],incomes:[],categories:[]}),{selectedYear:P,selectedMonth:C,hasActiveFilters:R,balancesHidden:F,getFilterParams:U,getPeriodTitle:Z,updateAvailableData:G}=(0,T.P)();(0,r.useEffect)((()=>{L()}),[]),(0,r.useEffect)((()=>{null===C&&null===P||L(!1)}),[C,P]);const L=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{s(!0);const m=U();let x={};try{var t,r,n,c;const[e,s,i,o,d]=await Promise.all([w.zZ.overview(m),w.rh.expenses((0,a.A)((0,a.A)({},m),{},{sort:"date",order:"desc",limit:50})),w.rh.incomes((0,a.A)((0,a.A)({},m),{},{sort:"date",order:"desc",limit:50})),w.rh.categories(m),w.fm.list()]),l=e.data||{},g=s.data||{},p=i.data||{},u=o.data||{},h=(null===(t=d.data)||void 0===t?void 0:t.data)||d.data||[],f=(g.Expenses||[]).map((e=>({id:e.ID||e.id,user_id:e.UserID||e.user_id,amount:e.Amount||e.amount,amount_paid:e.AmountPaid||e.amount_paid,pending_amount:e.PendingAmount||e.pending_amount,description:e.Description||e.description,category_id:e.CategoryID||e.category_id,paid:void 0!==e.Paid?e.Paid:e.paid,due_date:e.DueDate||e.due_date,percentage:e.PercentageOfIncome||e.percentage,created_at:e.CreatedAt||e.created_at,updated_at:e.UpdatedAt||e.updated_at}))),y=(p.Incomes||[]).map((e=>({id:e.ID||e.id,user_id:e.UserID||e.user_id,amount:e.Amount||e.amount,description:e.Description||e.description,category_id:e.CategoryID||e.category_id,created_at:e.CreatedAt||e.created_at,updated_at:e.UpdatedAt||e.updated_at})));x={totalIncome:(null===(r=l.Metrics)||void 0===r?void 0:r.TotalIncome)||0,totalExpenses:(null===(n=l.Metrics)||void 0===n?void 0:n.TotalExpenses)||0,balance:(null===(c=l.Metrics)||void 0===c?void 0:c.Balance)||0,expenses:f,incomes:y,categories:Array.isArray(h)?h:[],dashboardMetrics:l.Metrics||{},expensesSummary:g.Summary||{},categoriesAnalytics:u.Categories||[],allExpenses:f,allIncomes:y},console.log("\u2705 Usando nuevos endpoints del backend")}catch(l){var i,o,d;console.warn("\u26a0\ufe0f Nuevos endpoints no disponibles, usando endpoints legacy:",l.message);const[e,s,t]=await Promise.all([w.sh.list(),w.t_.list(),w.fm.list()]),a=(null===(i=e.data)||void 0===i?void 0:i.expenses)||e.data||[],r=(null===(o=s.data)||void 0===o?void 0:o.incomes)||s.data||[],n=(null===(d=t.data)||void 0===d?void 0:d.data)||t.data||[],c=Array.isArray(a)?a:[],m=Array.isArray(r)?r:[],g=Array.isArray(n)?n:[],p=M(c,C,P),u=M(m,C,P),h=p.reduce(((e,s)=>e+s.amount),0),f=u.reduce(((e,s)=>e+s.amount),0);x={totalIncome:f,totalExpenses:h,balance:f-h,expenses:p,incomes:u,categories:g,dashboardMetrics:{},expensesSummary:{},categoriesAnalytics:[],allExpenses:c,allIncomes:m},console.log("\u2705 Usando endpoints legacy con c\xe1lculos client-side")}E(x),e&&G(x.allExpenses||x.expenses,x.allIncomes||x.incomes)}catch(m){console.warn("\u26a0\ufe0f Todos los endpoints fallaron, usando datos mock:",m.message),await(0,A.uT)(300),E(A.zj),e&&G(A.zj.expenses,A.zj.incomes),I.Ay.success("\ud83d\udea7 Usando datos de ejemplo (backend no disponible)",{duration:3e3})}finally{s(!1)}},O=e=>F?"\u2022\u2022\u2022\u2022\u2022\u2022":(0,w.vv)(e),z=e=>(0,w.Ee)(e),M=(e,s,t)=>R?e.filter((e=>{if(!e.created_at)return!1;const a=new Date(e.created_at);if(isNaN(a.getTime()))return!1;if(t&&a.getFullYear().toString()!==t)return!1;if(s){return a.toISOString().slice(0,7)===s}return!0})):e,K=e=>{const s=[{bg:"bg-blue-100",border:"border-blue-400",text:"text-blue-700"},{bg:"bg-green-100",border:"border-green-400",text:"text-green-700"},{bg:"bg-yellow-100",border:"border-yellow-400",text:"text-yellow-700"},{bg:"bg-purple-100",border:"border-purple-400",text:"text-purple-700"},{bg:"bg-pink-100",border:"border-pink-400",text:"text-pink-700"},{bg:"bg-indigo-100",border:"border-indigo-400",text:"text-indigo-700"},{bg:"bg-cyan-100",border:"border-cyan-400",text:"text-cyan-700"},{bg:"bg-orange-100",border:"border-orange-400",text:"text-orange-700"}];if(!e)return{bg:"bg-gray-100",border:"border-gray-400",text:"text-gray-700"};let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);return s[Math.abs(t)%s.length]},q=(()=>{let e="Total";return C&&P?e=(e=>{const[s,t]=e.split("-"),a=new Date(parseInt(s),parseInt(t)-1,1).toLocaleDateString("es-AR",{year:"numeric",month:"long"});return a.charAt(0).toUpperCase()+a.slice(1)})(C):C?e=new Date(C+"-01").toLocaleDateString("es-AR",{month:"short"}):P&&(e=P),[{name:e,ingresos:k.totalIncome,gastos:k.totalExpenses}]})(),W=(()=>{if(!k.categoriesAnalytics||!k.categoriesAnalytics.length)return[];const e=["#009ee3","#00a650","#ff6900","#e53e3e","#6b7280","#8b5cf6","#f59e0b"];return k.categoriesAnalytics.map(((s,t)=>({name:s.Name,value:s.Percentage,amount:s.TotalAmount,color:e[t%e.length]}))).filter((e=>e.value>0))})(),B=(e,s)=>{const t=[...e];switch(s){case"fecha":return t.sort(((e,s)=>{const t=new Date(e.created_at),a=new Date(s.created_at);return isNaN(t.getTime())&&isNaN(a.getTime())?0:isNaN(t.getTime())?1:isNaN(a.getTime())?-1:a-t}));case"monto":return t.sort(((e,s)=>{const t=Number(e.amount)||0;return(Number(s.amount)||0)-t}));case"categoria":return t.sort(((e,s)=>{var t,a;const r=(null===(t=k.categories.find((s=>s.id===e.category_id)))||void 0===t?void 0:t.name)||"Sin categor\xeda",n=(null===(a=k.categories.find((e=>e.id===s.category_id)))||void 0===a?void 0:a.name)||"Sin categor\xeda";return r.localeCompare(n)}));default:return t}};return e?(0,S.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,S.jsx)("div",{className:"spinner"}),(0,S.jsx)("span",{className:"ml-2 text-fr-gray-600",children:"Cargando dashboard..."})]}):(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"flex items-start justify-between",children:[(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("p",{className:"text-sm font-medium text-fr-gray-600",children:"Balance Total"}),(0,S.jsx)("p",{className:"text-xl lg:text-2xl font-bold ".concat(k.balance>=0?"text-fr-secondary":"text-fr-error"," break-words"),children:O(k.balance)})]}),(0,S.jsx)("div",{className:"flex-shrink-0 p-2 lg:p-3 rounded-fr ".concat(k.balance>=0?"bg-green-100":"bg-red-100"," ml-2"),children:(0,S.jsx)(n.A,{className:"w-5 h-5 lg:w-6 lg:h-6 ".concat(k.balance>=0?"text-fr-secondary":"text-fr-error")})})]}),(0,S.jsxs)("div",{className:"mt-3 flex items-center",children:[k.balance>=0?(0,S.jsx)(c.A,{className:"w-4 h-4 text-fr-secondary mr-1 flex-shrink-0"}):(0,S.jsx)(i.A,{className:"w-4 h-4 text-fr-error mr-1 flex-shrink-0"}),(0,S.jsx)("span",{className:"text-sm ".concat(k.balance>=0?"text-fr-secondary":"text-fr-error"),children:k.balance>=0?"Positivo":"Negativo"})]})]}),(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"flex items-start justify-between",children:[(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("p",{className:"text-sm font-medium text-fr-gray-600",children:"Total Ingresos"}),(0,S.jsx)("p",{className:"text-xl lg:text-2xl font-bold text-fr-secondary break-words",children:O(k.totalIncome)})]}),(0,S.jsx)("div",{className:"flex-shrink-0 p-2 lg:p-3 rounded-fr bg-green-100 ml-2",children:(0,S.jsx)(o.A,{className:"w-5 h-5 lg:w-6 lg:h-6 text-fr-secondary"})})]}),(0,S.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,S.jsx)(o.A,{className:"w-4 h-4 text-fr-secondary mr-1 flex-shrink-0"}),(0,S.jsxs)("span",{className:"text-sm text-fr-gray-500",children:[k.incomes.length," ",1===k.incomes.length?"ingreso":"ingresos"," registrados"]})]})]}),(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"flex items-start justify-between",children:[(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("p",{className:"text-sm font-medium text-fr-gray-600",children:"Total Gastos"}),(0,S.jsx)("p",{className:"text-xl lg:text-2xl font-bold text-fr-gray-900 break-words",children:O(k.totalExpenses)})]}),(0,S.jsx)("div",{className:"flex-shrink-0 p-2 lg:p-3 rounded-fr bg-gray-100 ml-2",children:(0,S.jsx)(d.A,{className:"w-5 h-5 lg:w-6 lg:h-6 text-fr-gray-900"})})]}),(0,S.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,S.jsx)(d.A,{className:"w-4 h-4 text-fr-gray-900 mr-1 flex-shrink-0"}),(0,S.jsxs)("span",{className:"text-sm text-fr-gray-500",children:[k.expenses.length," ",1===k.expenses.length?"gasto":"gastos"," registrados"]})]})]}),(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"flex items-start justify-between",children:[(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("p",{className:"text-sm font-medium text-fr-gray-600",children:"Gastos Pendientes"}),(0,S.jsx)("p",{className:"text-xl lg:text-2xl font-bold text-fr-gray-900",children:k.expenses.filter((e=>!e.paid)).length})]}),(0,S.jsx)("div",{className:"flex-shrink-0 p-2 lg:p-3 rounded-fr bg-gray-100 ml-2",children:(0,S.jsx)(l.A,{className:"w-5 h-5 lg:w-6 lg:h-6 text-fr-gray-900"})})]}),(0,S.jsx)("div",{className:"mt-3",children:(0,S.jsxs)("span",{className:"text-sm text-fr-gray-500",children:[O(k.expenses.filter((e=>!e.paid)).reduce(((e,s)=>e+s.amount),0))," por pagar"]})})]})]}),R&&(k.expenses.length>0||k.incomes.length>0)&&(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,S.jsxs)("h3",{className:"text-lg font-semibold text-fr-gray-900",children:["\ud83d\udcb0 Transacciones de ",Z()]}),(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-4 md:space-y-0",children:[(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsx)("label",{className:"text-sm font-medium text-fr-gray-600",children:"Ordenar por:"}),(0,S.jsxs)("select",{value:t,onChange:e=>D(e.target.value),className:"text-sm border border-fr-gray-300 rounded-fr px-3 py-1 focus:outline-none focus:ring-2 focus:ring-fr-primary focus:border-transparent",children:[(0,S.jsx)("option",{value:"fecha",children:"Fecha"}),(0,S.jsx)("option",{value:"monto",children:"Monto"}),(0,S.jsx)("option",{value:"categoria",children:"Categor\xeda"})]})]}),(0,S.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"w-3 h-3 bg-fr-error rounded-full mr-2"}),(0,S.jsxs)("span",{className:"text-fr-gray-600",children:["Gastos (",k.expenses.length,")"]})]}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"w-3 h-3 bg-fr-secondary rounded-full mr-2"}),(0,S.jsxs)("span",{className:"text-fr-gray-600",children:["Ingresos (",k.incomes.length,")"]})]})]})]})]}),(0,S.jsxs)("div",{className:"relative grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6 xl:gap-8",children:[(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsx)("div",{className:"space-y-3 mb-4",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("h4",{className:"font-semibold text-fr-gray-900 flex items-center",children:[(0,S.jsx)(d.A,{className:"w-5 h-5 mr-2"}),"Gastos"]}),(0,S.jsx)("span",{className:"text-lg font-bold text-fr-gray-900",children:O(k.totalExpenses)})]})}),(0,S.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===k.expenses.length?(0,S.jsxs)("div",{className:"text-center py-8 text-fr-gray-500",children:[(0,S.jsx)(d.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,S.jsx)("p",{children:"No hay gastos en este per\xedodo"})]}):B(k.expenses,t).map(((e,s)=>{const t=k.categories.find((s=>s.id===e.category_id)),a=K(e.category_id);return(0,S.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-fr bg-white border border-fr-gray-100 hover:shadow-sm transition-shadow",children:[(0,S.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,S.jsx)("div",{className:"flex-shrink-0 mt-1",children:e.paid?(0,S.jsx)(m.A,{className:"w-5 h-5 text-fr-secondary"}):(0,S.jsx)(x.A,{className:"w-5 h-5 text-fr-error"})}),(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsx)("p",{className:"font-medium text-fr-gray-900 text-sm",children:e.description}),!e.paid&&(0,S.jsx)("span",{className:"badge-error text-xs",children:"Pendiente"}),t&&(0,S.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a.bg," ").concat(a.text," border ").concat(a.border),children:t.name})]}),(0,S.jsxs)("p",{className:"text-xs text-fr-gray-500 mt-1",children:[new Date(e.created_at).toLocaleDateString("es-AR"),e.due_date&&(0,S.jsxs)("span",{className:"ml-2",children:["\u2022 Vence: ",new Date(e.due_date).toLocaleDateString("es-AR")]})]})]})]}),(0,S.jsxs)("div",{className:"text-right ml-3",children:[(0,S.jsxs)("p",{className:"font-semibold text-fr-gray-900",children:["-",O(e.amount)]}),e.percentage&&(0,S.jsxs)("p",{className:"text-xs text-fr-gray-500",children:[z(e.percentage)," del total"]}),e.amount_paid>0&&e.amount_paid<e.amount&&(0,S.jsxs)("p",{className:"text-xs text-fr-gray-500",children:["Pagado: ",O(e.amount_paid)]})]})]},e.id||s)}))})]}),(0,S.jsx)("div",{className:"hidden lg:block absolute left-1/2 top-4 bottom-4 w-px bg-gradient-to-b from-transparent via-fr-gray-200 to-transparent transform -translate-x-1/2"}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsx)("div",{className:"space-y-3 mb-4",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("h4",{className:"font-semibold text-fr-secondary flex items-center",children:[(0,S.jsx)(o.A,{className:"w-5 h-5 mr-2"}),"Ingresos"]}),(0,S.jsx)("span",{className:"text-lg font-bold text-fr-secondary",children:O(k.totalIncome)})]})}),(0,S.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===k.incomes.length?(0,S.jsxs)("div",{className:"text-center py-8 text-fr-gray-500",children:[(0,S.jsx)(o.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,S.jsx)("p",{children:"No hay ingresos en este per\xedodo"})]}):B(k.incomes,t).map(((e,s)=>{const t=K(e.category_id),a=k.categories.find((s=>s.id===e.category_id));return(0,S.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-fr bg-white border border-fr-gray-100 hover:shadow-sm transition-shadow",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsx)("p",{className:"font-medium text-fr-gray-900 text-sm",children:e.description}),a&&(0,S.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(t.bg," ").concat(t.text," border ").concat(t.border),children:a.name})]}),(0,S.jsx)("p",{className:"text-xs text-fr-gray-500 mt-1",children:new Date(e.created_at).toLocaleDateString("es-AR")})]}),(0,S.jsxs)("div",{className:"text-right ml-3",children:[(0,S.jsxs)("p",{className:"font-semibold text-fr-secondary",children:["+",O(e.amount)]}),e.percentage&&(0,S.jsx)("p",{className:"text-xs text-fr-gray-500",children:z(e.percentage)})]})]},e.id||s)}))})]})]}),(k.expenses.length>0||k.incomes.length>0)&&(0,S.jsxs)("div",{className:"mt-6 pt-4 border-t border-fr-gray-200",children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsx)("span",{className:"font-medium text-fr-gray-600",children:"Total gastos:"}),(0,S.jsxs)("div",{className:"text-right",children:[(0,S.jsx)("div",{className:"font-bold text-fr-gray-900",children:O(k.totalExpenses)}),k.totalIncome>0&&(0,S.jsxs)("div",{className:"text-xs text-fr-gray-500",children:[(k.totalExpenses/k.totalIncome*100).toFixed(1),"% de ingresos"]})]})]}),(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsx)("span",{className:"font-medium text-fr-gray-600",children:"Total ingresos:"}),(0,S.jsxs)("div",{className:"text-right",children:[(0,S.jsx)("div",{className:"font-bold text-fr-secondary",children:O(k.totalIncome)}),(0,S.jsx)("div",{className:"text-xs text-fr-gray-500",children:"100% base"})]})]})]}),(0,S.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-fr-gray-200",children:[(0,S.jsx)("span",{className:"text-fr-gray-600",children:"Balance del per\xedodo:"}),(0,S.jsxs)("span",{className:"text-xl font-bold ".concat(k.balance>=0?"text-fr-secondary":"text-fr-error"),children:[k.balance>=0?"+":"",O(k.balance)]})]})]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6",children:[(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-fr-gray-900",children:R?"Datos de ".concat(Z()):"Tendencia Mensual"}),(0,S.jsx)("p",{className:"text-sm text-fr-gray-500 mt-1",children:R?"Resumen del per\xedodo seleccionado":"Datos del mes actual (hist\xf3rico pr\xf3ximamente)"})]}),(0,S.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"w-3 h-3 bg-fr-secondary rounded-full mr-2"}),(0,S.jsx)("span",{className:"text-fr-gray-600",children:"Ingresos"})]}),(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("div",{className:"w-3 h-3 bg-fr-accent rounded-full mr-2"}),(0,S.jsx)("span",{className:"text-fr-gray-600",children:"Gastos"})]})]})]}),(0,S.jsx)(p.u,{width:"100%",height:250,children:(0,S.jsxs)(u.Q,{data:q,children:[(0,S.jsx)(h.d,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,S.jsx)(f.W,{dataKey:"name",stroke:"#6b7280"}),(0,S.jsx)(y.h,{stroke:"#6b7280"}),(0,S.jsx)(j.m,{formatter:e=>[(0,w.vv)(e)],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.15)"}}),(0,S.jsx)(N.G,{type:"monotone",dataKey:"ingresos",stackId:"1",stroke:"#00a650",fill:"#00a650",fillOpacity:.6}),(0,S.jsx)(N.G,{type:"monotone",dataKey:"gastos",stackId:"2",stroke:"#ff6900",fill:"#ff6900",fillOpacity:.6})]})})]}),(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("h3",{className:"text-lg font-semibold text-fr-gray-900 mb-6",children:["Gastos por Categor\xeda",R&&" - ".concat(Z())]}),W.length>0?(0,S.jsx)("div",{className:"flex items-center justify-center",children:(0,S.jsx)(p.u,{width:"100%",height:250,children:(0,S.jsxs)(b.r,{children:[(0,S.jsx)(v.F,{data:W,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"value",label:e=>{let{name:s,value:t}=e;return"".concat(s,": ").concat(t,"%")},labelLine:!1,children:W.map(((e,s)=>(0,S.jsx)(_.f,{fill:e.color},"cell-".concat(s))))}),(0,S.jsx)(j.m,{formatter:(e,s,t)=>["".concat(e,"% (").concat((0,w.vv)(t.payload.amount),")"),"Porcentaje"],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.15)"}})]})})}):(0,S.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,S.jsx)(g.A,{className:"w-12 h-12 text-fr-gray-400 mb-4"}),(0,S.jsx)("h4",{className:"text-lg font-medium text-fr-gray-600 mb-2",children:"No hay gastos por categor\xedas"}),(0,S.jsx)("p",{className:"text-sm text-fr-gray-500",children:"Los gastos aparecer\xe1n aqu\xed una vez que agregues algunos gastos con categor\xedas"})]})]})]}),(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-fr-gray-900",children:"Transacciones Recientes"}),(0,S.jsx)("button",{className:"btn-ghost",children:"Ver todas"})]}),(0,S.jsx)("div",{className:"space-y-4",children:[...k.expenses.slice(0,3),...k.incomes.slice(0,2)].sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at))).slice(0,5).map(((e,s)=>{const t=e.hasOwnProperty("paid"),a=K(e.category_id),r=k.categories.find((s=>s.id===e.category_id));return(0,S.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-fr bg-fr-gray-50 border-l-4 ".concat(a.border||(t?"border-fr-gray-900":"border-fr-secondary")),children:[(0,S.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,S.jsx)("div",{className:"p-2 rounded-fr ".concat(t?"bg-gray-100":"bg-green-100"),children:t?(0,S.jsx)(d.A,{className:"w-4 h-4 text-fr-gray-900"}):(0,S.jsx)(o.A,{className:"w-4 h-4 text-fr-secondary"})}),(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsx)("p",{className:"font-medium text-fr-gray-900",children:e.description}),t&&(0,S.jsxs)("div",{className:"flex items-center space-x-1",children:[e.paid?(0,S.jsx)(m.A,{className:"w-4 h-4 text-fr-secondary"}):(0,S.jsx)(x.A,{className:"w-4 h-4 text-fr-error"}),!e.paid&&(0,S.jsx)("span",{className:"badge-error text-xs",children:"Pendiente"})]}),r&&(0,S.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a.bg," ").concat(a.text," border ").concat(a.border),children:r.name})]}),(0,S.jsx)("p",{className:"text-sm text-fr-gray-500",children:e.created_at?(0,w.Yq)(e.created_at):"Fecha no disponible"})]})]}),(0,S.jsxs)("div",{className:"text-right",children:[(0,S.jsxs)("p",{className:"font-semibold ".concat(t?"text-fr-gray-900":"text-fr-secondary"),children:[t?"-":"+",O(e.amount)]}),e.percentage&&(0,S.jsxs)("p",{className:"text-sm text-fr-gray-500",children:[z(e.percentage)," del total"]})]})]},s)}))})]})]})}},8651:(e,s,t)=>{t.d(s,{NK:()=>o,No:()=>c,UI:()=>n,uT:()=>d,zA:()=>r,zj:()=>i});var a=t(2555);const r=[{id:1,name:"Alimentaci\xf3n",description:"Gastos en comida y bebidas",user_id:"user123"},{id:2,name:"Transporte",description:"Gastos en movilidad",user_id:"user123"},{id:3,name:"Entretenimiento",description:"Gastos en ocio y diversi\xf3n",user_id:"user123"},{id:4,name:"Salario",description:"Ingresos por trabajo",user_id:"user123"},{id:5,name:"Servicios",description:"Gastos en servicios p\xfablicos",user_id:"user123"}],n=[{id:1,user_id:"user123",description:"Supermercado",amount:12500,category_id:1,due_date:"2025-01-20",paid:!1,created_at:"2025-01-15T10:00:00Z",updated_at:"2025-01-15T10:00:00Z"},{id:2,user_id:"user123",description:"Uber",amount:3200,category_id:2,due_date:null,paid:!0,created_at:"2025-01-14T15:30:00Z",updated_at:"2025-01-14T15:30:00Z"},{id:3,user_id:"user123",description:"Netflix",amount:2800,category_id:3,due_date:"2025-01-25",paid:!0,created_at:"2025-01-12T09:15:00Z",updated_at:"2025-01-12T09:15:00Z"},{id:4,user_id:"user123",description:"Luz y Gas",amount:8500,category_id:5,due_date:"2025-01-30",paid:!1,created_at:"2025-01-10T12:00:00Z",updated_at:"2025-01-10T12:00:00Z"}],c=[{id:1,user_id:"user123",description:"Salario Enero",amount:25e4,category_id:4,created_at:"2025-01-01T08:00:00Z",updated_at:"2025-01-01T08:00:00Z"},{id:2,user_id:"user123",description:"Freelance - Proyecto Web",amount:45e3,category_id:4,created_at:"2025-01-10T14:00:00Z",updated_at:"2025-01-10T14:00:00Z"}],i={balance:268e3,totalIncome:295e3,totalExpenses:27e3,expenses:n,incomes:c,categories:r,categoriesAnalytics:[{Name:"Alimentaci\xf3n",TotalAmount:12500,Percentage:46.3,category_id:1},{Name:"Servicios",TotalAmount:8500,Percentage:31.5,category_id:5},{Name:"Transporte",TotalAmount:3200,Percentage:11.9,category_id:2},{Name:"Entretenimiento",TotalAmount:2800,Percentage:10.4,category_id:3}]},o={total_income:295e3,total_expenses:27e3,transactions:[...n,...c.map((e=>(0,a.A)((0,a.A)({},e),{},{type:"income"})))],category_summary:[{category_name:"Alimentaci\xf3n",total_amount:12500,percentage:46.3,category_id:1},{category_name:"Servicios",total_amount:8500,percentage:31.5,category_id:5},{category_name:"Transporte",total_amount:3200,percentage:11.9,category_id:2},{category_name:"Entretenimiento",total_amount:2800,percentage:10.4,category_id:3}]},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise((s=>setTimeout(s,e)))}}}]);
//# sourceMappingURL=941.e07e5c92.chunk.js.map