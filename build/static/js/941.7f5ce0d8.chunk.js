"use strict";(self.webpackChunkfinancial_resume_engine_frontend=self.webpackChunkfinancial_resume_engine_frontend||[]).push([[941],{4505:(e,s,t)=>{t.d(s,{Ee:()=>h,_2:()=>m,fm:()=>o,rh:()=>p,sh:()=>i,t_:()=>d,vv:()=>g,zZ:()=>x});var a=t(2555),r=t(9722),n=t(3768);const l=r.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}}),c="user123";l.interceptors.request.use((e=>(e.headers["x-caller-id"]=c,e)),(e=>Promise.reject(e))),l.interceptors.response.use((e=>e),(e=>{var s,t,a,r,l;const c=(null===(s=e.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.error)||e.message||"Error desconocido";return 401===(null===(a=e.response)||void 0===a?void 0:a.status)?n.Ay.error("No autorizado"):404===(null===(r=e.response)||void 0===r?void 0:r.status)?n.Ay.error("Recurso no encontrado"):(null===(l=e.response)||void 0===l?void 0:l.status)>=500?n.Ay.error("Error del servidor"):n.Ay.error(c),Promise.reject(e)}));const o={list:()=>l.get("/categories"),get:e=>l.get("/categories/".concat(e)),create:e=>l.post("/categories",(0,a.A)((0,a.A)({},e),{},{user_id:c})),update:(e,s)=>l.patch("/categories/".concat(e),(0,a.A)((0,a.A)({},s),{},{user_id:c})),delete:e=>l.delete("/categories/".concat(e))},i={list:()=>l.get("/expenses"),listUnpaid:()=>l.get("/expenses/unpaid"),get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments.length>1?arguments[1]:void 0;return l.get("/expenses/".concat(e,"/").concat(s))},create:e=>l.post("/expenses",(0,a.A)((0,a.A)({},e),{},{user_id:c})),update:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return l.patch("/expenses/".concat(e,"/").concat(s),(0,a.A)((0,a.A)({},t),{},{user_id:c}))},delete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments.length>1?arguments[1]:void 0;return l.delete("/expenses/".concat(e,"/").concat(s))}},d={list:()=>l.get("/incomes"),get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments.length>1?arguments[1]:void 0;return l.get("/incomes/".concat(e,"/").concat(s))},create:e=>l.post("/incomes",(0,a.A)((0,a.A)({},e),{},{user_id:c})),update:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return l.patch("/incomes/".concat(e,"/").concat(s),(0,a.A)((0,a.A)({},t),{},{user_id:c}))},delete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments.length>1?arguments[1]:void 0;return l.delete("/incomes/".concat(e,"/").concat(s))}},m={generate:(e,s)=>l.get("/reports",{params:{start_date:e,end_date:s}})},x={overview:e=>l.get("/dashboard",{params:e})},p={expenses:e=>l.get("/expenses/summary",{params:e}),incomes:e=>l.get("/incomes/summary",{params:e}),categories:e=>l.get("/categories/analytics",{params:e})},g=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),h=e=>"".concat(e.toFixed(1),"%")},4941:(e,s,t)=>{t.r(s),t.d(s,{default:()=>E});var a=t(2555),r=t(5043),n=t(8646),l=t(4651),c=t(5087),o=t(3062),i=t(7010),d=t(7899),m=t(4919),x=t(3782),p=t(4319),g=t(9875),h=t(2649),u=t(108),j=t(877),f=t(7734),v=t(2185),N=t(6026),b=t(6150),y=t(3839),w=t(163),A=t(4240),_=t(7869),S=t(4505),k=t(3768),D=t(579);const E=()=>{const[e,s]=(0,r.useState)(!0),[t,E]=(0,r.useState)(!0),[T,I]=(0,r.useState)(""),[C,R]=(0,r.useState)(""),[P,O]=(0,r.useState)("fecha"),[F,L]=(0,r.useState)({totalIncome:0,totalExpenses:0,balance:0,expenses:[],incomes:[],categories:[]});(0,r.useEffect)((()=>{G()}),[]),(0,r.useEffect)((()=>{F.expenses.length>0&&G()}),[T,C,F.expenses.length]),(0,r.useEffect)((()=>{if(C&&T){M().includes(T)||I("")}}),[C,F]),(0,r.useEffect)((()=>{if(!T&&(F.expenses.length>0||F.incomes.length>0)){var e,s;const t=(()=>{const e=new Set;[...F.expenses,...F.incomes].forEach((s=>{if(s.created_at){const t=new Date(s.created_at),a=t.toISOString().slice(0,7);console.log("[useEffect] Procesando fecha: ".concat(s.created_at," -> ").concat(a," (").concat(t.toLocaleDateString("es-AR",{month:"long",year:"numeric"}),")")),e.add(a)}}));const s=(new Date).toISOString().slice(0,7);return e.add(s),Array.from(e).sort().reverse()})();console.log("Meses disponibles:",t),console.log("Datos de ejemplo:",null===(e=F.expenses[0])||void 0===e?void 0:e.created_at,null===(s=F.incomes[0])||void 0===s?void 0:s.created_at),console.log("Seleccionando mes:",t[0]),t.length>0&&I(t[0])}}),[F,T]);const M=()=>{const e=new Set;[...F.expenses,...F.incomes].forEach((s=>{if(s.created_at){const t=new Date(s.created_at),a=t.getFullYear().toString();if(C&&a!==C)return;const r=t.toISOString().slice(0,7);e.add(r)}}));const s=new Date,t=s.getFullYear().toString();if(!C||t===C){const t=s.toISOString().slice(0,7);e.add(t)}return Array.from(e).sort().reverse()},U=()=>{const e=new Set;[...F.expenses,...F.incomes].forEach((s=>{if(s.created_at){const t=new Date(s.created_at).getFullYear().toString();e.add(t)}}));const s=(new Date).getFullYear().toString();return e.add(s),Array.from(e).sort().reverse()},G=async()=>{try{s(!0);const d={};if(C&&(d.year=C),T){const[e,s]=T.split("-");d.year=e,d.month=s}let m={};try{var e,t,r,n;const[s,l,c,o]=await Promise.all([S.zZ.overview(d),S.rh.expenses((0,a.A)((0,a.A)({},d),{},{sort:"date",order:"desc",limit:50})),S.rh.categories(d),S.fm.list()]),i=s.data||{},x=l.data||{},p=c.data||{},g=(null===(e=o.data)||void 0===e?void 0:e.data)||o.data||[];m={totalIncome:(null===(t=i.Metrics)||void 0===t?void 0:t.TotalIncome)||0,totalExpenses:(null===(r=i.Metrics)||void 0===r?void 0:r.TotalExpenses)||0,balance:(null===(n=i.Metrics)||void 0===n?void 0:n.Balance)||0,expenses:x.Expenses||[],incomes:[],categories:Array.isArray(g)?g:[],dashboardMetrics:i.Metrics||{},expensesSummary:x.Summary||{},categoriesAnalytics:p.Categories||[]},console.log("\u2705 Usando nuevos endpoints del backend")}catch(i){var l,c,o;console.warn("\u26a0\ufe0f Nuevos endpoints no disponibles, usando endpoints legacy:",i.message);const[e,s,t]=await Promise.all([S.sh.list(),S.t_.list(),S.fm.list()]),a=(null===(l=e.data)||void 0===l?void 0:l.expenses)||e.data||[],r=(null===(c=s.data)||void 0===c?void 0:c.incomes)||s.data||[],n=(null===(o=t.data)||void 0===o?void 0:o.data)||t.data||[],d=Array.isArray(a)?a:[],x=Array.isArray(r)?r:[],p=Array.isArray(n)?n:[],g=z(d,T,C),h=z(x,T,C),u=g.reduce(((e,s)=>e+s.amount),0),j=h.reduce(((e,s)=>e+s.amount),0);m={totalIncome:j,totalExpenses:u,balance:j-u,expenses:g,incomes:h,categories:p,dashboardMetrics:{},expensesSummary:{},categoriesAnalytics:[]},console.log("\u2705 Usando endpoints legacy con c\xe1lculos client-side")}L(m)}catch(d){console.error("Error loading dashboard data:",d),k.Ay.error("Error al cargar los datos del dashboard"),L({totalIncome:0,totalExpenses:0,balance:0,expenses:[],incomes:[],categories:[],dashboardMetrics:{},expensesSummary:{},categoriesAnalytics:[]})}finally{s(!1)}},K=e=>t?(0,S.vv)(e):"\u2022\u2022\u2022\u2022\u2022\u2022",Y=e=>"".concat(e.toFixed(1),"%"),z=(e,s,t)=>B?e.filter((e=>{const a=new Date(e.created_at);if(t&&a.getFullYear().toString()!==t)return!1;if(s){return a.toISOString().slice(0,7)===s}return!0})):e,B=T||C,W=()=>T&&C||T?q(T):C?"A\xf1o ".concat(C):"",q=e=>{const[s,t]=e.split("-"),a=new Date(parseInt(s),parseInt(t)-1,1).toLocaleDateString("es-AR",{year:"numeric",month:"long"});return a.charAt(0).toUpperCase()+a.slice(1)},H=e=>{const[s,t]=e.split("-"),a=new Date(parseInt(s),parseInt(t)-1,1).toLocaleDateString("es-AR",{month:"long"});return a.charAt(0).toUpperCase()+a.slice(1)},V=e=>{const s=[{bg:"bg-blue-100",border:"border-blue-400",text:"text-blue-700"},{bg:"bg-green-100",border:"border-green-400",text:"text-green-700"},{bg:"bg-yellow-100",border:"border-yellow-400",text:"text-yellow-700"},{bg:"bg-purple-100",border:"border-purple-400",text:"text-purple-700"},{bg:"bg-pink-100",border:"border-pink-400",text:"text-pink-700"},{bg:"bg-indigo-100",border:"border-indigo-400",text:"text-indigo-700"},{bg:"bg-cyan-100",border:"border-cyan-400",text:"text-cyan-700"},{bg:"bg-orange-100",border:"border-orange-400",text:"text-orange-700"}];if(!e)return{bg:"bg-gray-100",border:"border-gray-400",text:"text-gray-700"};let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);return s[Math.abs(t)%s.length]},Z=(()=>{let e="Total";return T&&C?e=q(T):T?e=new Date(T+"-01").toLocaleDateString("es-AR",{month:"short"}):C&&(e=C),[{name:e,ingresos:F.totalIncome,gastos:F.totalExpenses}]})(),Q=(()=>{if(!F.categoriesAnalytics||!F.categoriesAnalytics.length)return[];const e=["#009ee3","#00a650","#ff6900","#e53e3e","#6b7280","#8b5cf6","#f59e0b"];return F.categoriesAnalytics.map(((s,t)=>({name:s.Name,value:s.Percentage,amount:s.TotalAmount,color:e[t%e.length]}))).filter((e=>e.value>0))})(),J=(e,s)=>{const t=[...e];switch(s){case"fecha":return t.sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at)));case"monto":return t.sort(((e,s)=>s.amount-e.amount));case"categoria":return t.sort(((e,s)=>{var t,a;const r=(null===(t=F.categories.find((s=>s.id===e.category_id)))||void 0===t?void 0:t.name)||"Sin categor\xeda",n=(null===(a=F.categories.find((e=>e.id===s.category_id)))||void 0===a?void 0:a.name)||"Sin categor\xeda";return r.localeCompare(n)}));default:return t}};return e?(0,D.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,D.jsx)("div",{className:"spinner"}),(0,D.jsx)("span",{className:"ml-2 text-mp-gray-600",children:"Cargando dashboard..."})]}):(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:(0,D.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-mp-gray-700 mb-2 flex items-center",children:[(0,D.jsx)(n.A,{className:"w-4 h-4 mr-2 text-mp-gray-500"}),"Filtrar por a\xf1o"]}),(0,D.jsxs)("select",{value:C,onChange:e=>R(e.target.value),className:"input w-full sm:w-auto min-w-[150px]",children:[(0,D.jsx)("option",{value:"",children:"Todos los a\xf1os"}),U().map((e=>(0,D.jsx)("option",{value:e,children:e},e)))]})]}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-mp-gray-700 mb-2 flex items-center",children:[(0,D.jsx)(n.A,{className:"w-4 h-4 mr-2 text-mp-gray-500"}),"Filtrar por mes"]}),(0,D.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"input w-full sm:w-auto min-w-[200px]",children:[(0,D.jsx)("option",{value:"",children:C?"Todos los meses de ".concat(C):"Todos los meses"}),M().map((e=>(0,D.jsx)("option",{value:e,children:H(e)},e)))]})]}),(0,D.jsx)("div",{className:"self-end",children:(0,D.jsxs)("button",{onClick:()=>E(!t),className:"btn-ghost flex items-center space-x-2",children:[t?(0,D.jsx)(l.A,{className:"w-4 h-4"}):(0,D.jsx)(c.A,{className:"w-4 h-4"}),(0,D.jsxs)("span",{children:[t?"Ocultar":"Mostrar"," montos"]})]})})]})}),(0,D.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[(0,D.jsxs)("div",{className:"card",children:[(0,D.jsxs)("div",{className:"flex items-start justify-between",children:[(0,D.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,D.jsx)("p",{className:"text-sm font-medium text-mp-gray-600",children:"Balance Total"}),(0,D.jsx)("p",{className:"text-xl lg:text-2xl font-bold ".concat(F.balance>=0?"text-mp-secondary":"text-mp-error"," break-words"),children:K(F.balance)})]}),(0,D.jsx)("div",{className:"flex-shrink-0 p-2 lg:p-3 rounded-mp ".concat(F.balance>=0?"bg-green-100":"bg-red-100"," ml-2"),children:(0,D.jsx)(o.A,{className:"w-5 h-5 lg:w-6 lg:h-6 ".concat(F.balance>=0?"text-mp-secondary":"text-mp-error")})})]}),(0,D.jsxs)("div",{className:"mt-3 flex items-center",children:[F.balance>=0?(0,D.jsx)(i.A,{className:"w-4 h-4 text-mp-secondary mr-1 flex-shrink-0"}):(0,D.jsx)(d.A,{className:"w-4 h-4 text-mp-error mr-1 flex-shrink-0"}),(0,D.jsx)("span",{className:"text-sm ".concat(F.balance>=0?"text-mp-secondary":"text-mp-error"),children:F.balance>=0?"Positivo":"Negativo"})]})]}),(0,D.jsxs)("div",{className:"card",children:[(0,D.jsxs)("div",{className:"flex items-start justify-between",children:[(0,D.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,D.jsx)("p",{className:"text-sm font-medium text-mp-gray-600",children:"Total Ingresos"}),(0,D.jsx)("p",{className:"text-xl lg:text-2xl font-bold text-mp-secondary break-words",children:K(F.totalIncome)})]}),(0,D.jsx)("div",{className:"flex-shrink-0 p-2 lg:p-3 rounded-mp bg-green-100 ml-2",children:(0,D.jsx)(m.A,{className:"w-5 h-5 lg:w-6 lg:h-6 text-mp-secondary"})})]}),(0,D.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,D.jsx)(m.A,{className:"w-4 h-4 text-mp-secondary mr-1 flex-shrink-0"}),(0,D.jsxs)("span",{className:"text-sm text-mp-gray-500",children:[F.incomes.length," ",1===F.incomes.length?"ingreso":"ingresos"," registrados"]})]})]}),(0,D.jsxs)("div",{className:"card",children:[(0,D.jsxs)("div",{className:"flex items-start justify-between",children:[(0,D.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,D.jsx)("p",{className:"text-sm font-medium text-mp-gray-600",children:"Total Gastos"}),(0,D.jsx)("p",{className:"text-xl lg:text-2xl font-bold text-mp-accent break-words",children:K(F.totalExpenses)})]}),(0,D.jsx)("div",{className:"flex-shrink-0 p-2 lg:p-3 rounded-mp bg-orange-100 ml-2",children:(0,D.jsx)(x.A,{className:"w-5 h-5 lg:w-6 lg:h-6 text-mp-accent"})})]}),(0,D.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,D.jsx)(x.A,{className:"w-4 h-4 text-mp-accent mr-1 flex-shrink-0"}),(0,D.jsxs)("span",{className:"text-sm text-mp-gray-500",children:[F.expenses.length," ",1===F.expenses.length?"gasto":"gastos"," registrados"]})]})]}),(0,D.jsxs)("div",{className:"card",children:[(0,D.jsxs)("div",{className:"flex items-start justify-between",children:[(0,D.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,D.jsx)("p",{className:"text-sm font-medium text-mp-gray-600",children:"Gastos Pendientes"}),(0,D.jsx)("p",{className:"text-xl lg:text-2xl font-bold text-mp-error",children:F.expenses.filter((e=>!e.paid)).length})]}),(0,D.jsx)("div",{className:"flex-shrink-0 p-2 lg:p-3 rounded-mp bg-red-100 ml-2",children:(0,D.jsx)(n.A,{className:"w-5 h-5 lg:w-6 lg:h-6 text-mp-error"})})]}),(0,D.jsx)("div",{className:"mt-3",children:(0,D.jsxs)("span",{className:"text-sm text-mp-gray-500",children:[K(F.expenses.filter((e=>!e.paid)).reduce(((e,s)=>e+s.amount),0))," por pagar"]})})]})]}),B&&(F.expenses.length>0||F.incomes.length>0)&&(0,D.jsxs)("div",{className:"card",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-mp-gray-900",children:["\ud83d\udcb0 Transacciones de ",W()]}),(0,D.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-4 md:space-y-0",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("label",{className:"text-sm font-medium text-mp-gray-600",children:"Ordenar por:"}),(0,D.jsxs)("select",{value:P,onChange:e=>O(e.target.value),className:"text-sm border border-mp-gray-300 rounded-mp px-3 py-1 focus:outline-none focus:ring-2 focus:ring-mp-primary focus:border-transparent",children:[(0,D.jsx)("option",{value:"fecha",children:"Fecha"}),(0,D.jsx)("option",{value:"monto",children:"Monto"}),(0,D.jsx)("option",{value:"categoria",children:"Categor\xeda"})]})]}),(0,D.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 bg-mp-error rounded-full mr-2"}),(0,D.jsxs)("span",{className:"text-mp-gray-600",children:["Gastos (",F.expenses.length,")"]})]}),(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 bg-mp-secondary rounded-full mr-2"}),(0,D.jsxs)("span",{className:"text-mp-gray-600",children:["Ingresos (",F.incomes.length,")"]})]})]})]})]}),(0,D.jsxs)("div",{className:"relative grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6 xl:gap-8",children:[(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("h4",{className:"font-semibold text-mp-error flex items-center",children:[(0,D.jsx)(x.A,{className:"w-5 h-5 mr-2"}),"Gastos"]}),(0,D.jsx)("span",{className:"text-lg font-bold text-mp-error",children:K(F.totalExpenses)})]}),(0,D.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,D.jsx)("div",{className:"flex-1",children:(0,D.jsxs)("select",{value:C,onChange:e=>R(e.target.value),className:"input w-full text-sm",children:[(0,D.jsx)("option",{value:"",children:"Todos los a\xf1os"}),U().map((e=>(0,D.jsx)("option",{value:e,children:e},e)))]})}),(0,D.jsx)("div",{className:"flex-1",children:(0,D.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"input w-full text-sm",children:[(0,D.jsx)("option",{value:"",children:C?"Todo ".concat(C):"Todos los meses"}),M().map((e=>(0,D.jsx)("option",{value:e,children:H(e)},e)))]})})]})]}),(0,D.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===F.expenses.length?(0,D.jsxs)("div",{className:"text-center py-8 text-mp-gray-500",children:[(0,D.jsx)(x.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,D.jsx)("p",{children:"No hay gastos en este per\xedodo"})]}):J(F.expenses,P).map(((e,s)=>{const t=F.categories.find((s=>s.id===e.category_id)),a=V(e.category_id);return(0,D.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-mp bg-white border border-mp-gray-100 hover:shadow-sm transition-shadow",children:[(0,D.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,D.jsx)("div",{className:"flex-shrink-0 mt-1",children:e.paid?(0,D.jsx)(p.A,{className:"w-5 h-5 text-mp-secondary"}):(0,D.jsx)(g.A,{className:"w-5 h-5 text-mp-error"})}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("p",{className:"font-medium text-mp-gray-900 text-sm",children:e.description}),!e.paid&&(0,D.jsx)("span",{className:"badge-error text-xs",children:"Pendiente"}),t&&(0,D.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a.bg," ").concat(a.text," border ").concat(a.border),children:t.name})]}),(0,D.jsxs)("p",{className:"text-xs text-mp-gray-500 mt-1",children:[new Date(e.created_at).toLocaleDateString("es-AR"),e.due_date&&(0,D.jsxs)("span",{className:"ml-2",children:["\u2022 Vence: ",new Date(e.due_date).toLocaleDateString("es-AR")]})]})]})]}),(0,D.jsxs)("div",{className:"text-right ml-3",children:[(0,D.jsxs)("p",{className:"font-semibold text-mp-error",children:["-",K(e.amount)]}),e.percentage&&(0,D.jsxs)("p",{className:"text-xs text-mp-gray-500",children:[Y(e.percentage)," del total"]}),e.amount_paid>0&&e.amount_paid<e.amount&&(0,D.jsxs)("p",{className:"text-xs text-mp-gray-500",children:["Pagado: ",K(e.amount_paid)]})]})]},e.id||s)}))})]}),(0,D.jsx)("div",{className:"hidden lg:block absolute left-1/2 top-4 bottom-4 w-px bg-gradient-to-b from-transparent via-mp-gray-200 to-transparent transform -translate-x-1/2"}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("h4",{className:"font-semibold text-mp-secondary flex items-center",children:[(0,D.jsx)(m.A,{className:"w-5 h-5 mr-2"}),"Ingresos"]}),(0,D.jsx)("span",{className:"text-lg font-bold text-mp-secondary",children:K(F.totalIncome)})]}),(0,D.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,D.jsx)("div",{className:"flex-1",children:(0,D.jsxs)("select",{value:C,onChange:e=>R(e.target.value),className:"input w-full text-sm",children:[(0,D.jsx)("option",{value:"",children:"Todos los a\xf1os"}),U().map((e=>(0,D.jsx)("option",{value:e,children:e},e)))]})}),(0,D.jsx)("div",{className:"flex-1",children:(0,D.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"input w-full text-sm",children:[(0,D.jsx)("option",{value:"",children:C?"Todo ".concat(C):"Todos los meses"}),M().map((e=>(0,D.jsx)("option",{value:e,children:H(e)},e)))]})})]})]}),(0,D.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===F.incomes.length?(0,D.jsxs)("div",{className:"text-center py-8 text-mp-gray-500",children:[(0,D.jsx)(m.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,D.jsx)("p",{children:"No hay ingresos en este per\xedodo"})]}):J(F.incomes,P).map(((e,s)=>{const t=V(e.category_id),a=F.categories.find((s=>s.id===e.category_id));return(0,D.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-mp bg-white border border-mp-gray-100 hover:shadow-sm transition-shadow",children:[(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("p",{className:"font-medium text-mp-gray-900 text-sm",children:e.description}),a&&(0,D.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(t.bg," ").concat(t.text," border ").concat(t.border),children:a.name})]}),(0,D.jsx)("p",{className:"text-xs text-mp-gray-500 mt-1",children:new Date(e.created_at).toLocaleDateString("es-AR")})]}),(0,D.jsxs)("div",{className:"text-right ml-3",children:[(0,D.jsxs)("p",{className:"font-semibold text-mp-secondary",children:["+",K(e.amount)]}),e.percentage&&(0,D.jsx)("p",{className:"text-xs text-mp-gray-500",children:Y(e.percentage)})]})]},e.id||s)}))})]})]}),(F.expenses.length>0||F.incomes.length>0)&&(0,D.jsxs)("div",{className:"mt-6 pt-4 border-t border-mp-gray-200",children:[(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsx)("span",{className:"font-medium text-mp-gray-600",children:"Total gastos:"}),(0,D.jsxs)("div",{className:"text-right",children:[(0,D.jsx)("div",{className:"font-bold text-mp-error",children:K(F.totalExpenses)}),F.totalIncome>0&&(0,D.jsxs)("div",{className:"text-xs text-mp-gray-500",children:[(F.totalExpenses/F.totalIncome*100).toFixed(1),"% de ingresos"]})]})]}),(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsx)("span",{className:"font-medium text-mp-gray-600",children:"Total ingresos:"}),(0,D.jsxs)("div",{className:"text-right",children:[(0,D.jsx)("div",{className:"font-bold text-mp-secondary",children:K(F.totalIncome)}),(0,D.jsx)("div",{className:"text-xs text-mp-gray-500",children:"100% base"})]})]})]}),(0,D.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-mp-gray-200",children:[(0,D.jsx)("span",{className:"text-mp-gray-600",children:"Balance del per\xedodo:"}),(0,D.jsxs)("span",{className:"text-xl font-bold ".concat(F.balance>=0?"text-mp-secondary":"text-mp-error"),children:[F.balance>=0?"+":"",K(F.balance)]})]})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6",children:[(0,D.jsxs)("div",{className:"card",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-mp-gray-900",children:B?"Datos de ".concat(W()):"Tendencia Mensual"}),(0,D.jsx)("p",{className:"text-sm text-mp-gray-500 mt-1",children:B?"Resumen del per\xedodo seleccionado":"Datos del mes actual (hist\xf3rico pr\xf3ximamente)"})]}),(0,D.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 bg-mp-secondary rounded-full mr-2"}),(0,D.jsx)("span",{className:"text-mp-gray-600",children:"Ingresos"})]}),(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 bg-mp-accent rounded-full mr-2"}),(0,D.jsx)("span",{className:"text-mp-gray-600",children:"Gastos"})]})]})]}),(0,D.jsx)(u.u,{width:"100%",height:250,children:(0,D.jsxs)(j.Q,{data:Z,children:[(0,D.jsx)(f.d,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,D.jsx)(v.W,{dataKey:"name",stroke:"#6b7280"}),(0,D.jsx)(N.h,{stroke:"#6b7280"}),(0,D.jsx)(b.m,{formatter:e=>[(0,S.vv)(e)],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.15)"}}),(0,D.jsx)(y.G,{type:"monotone",dataKey:"ingresos",stackId:"1",stroke:"#00a650",fill:"#00a650",fillOpacity:.6}),(0,D.jsx)(y.G,{type:"monotone",dataKey:"gastos",stackId:"2",stroke:"#ff6900",fill:"#ff6900",fillOpacity:.6})]})})]}),(0,D.jsxs)("div",{className:"card",children:[(0,D.jsxs)("h3",{className:"text-lg font-semibold text-mp-gray-900 mb-6",children:["Gastos por Categor\xeda",B&&" - ".concat(W())]}),Q.length>0?(0,D.jsx)("div",{className:"flex items-center justify-center",children:(0,D.jsx)(u.u,{width:"100%",height:250,children:(0,D.jsxs)(w.r,{children:[(0,D.jsx)(A.F,{data:Q,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"value",label:e=>{let{name:s,value:t}=e;return"".concat(s,": ").concat(t,"%")},labelLine:!1,children:Q.map(((e,s)=>(0,D.jsx)(_.f,{fill:e.color},"cell-".concat(s))))}),(0,D.jsx)(b.m,{formatter:(e,s,t)=>["".concat(e,"% (").concat((0,S.vv)(t.payload.amount),")"),"Porcentaje"],contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.15)"}})]})})}):(0,D.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,D.jsx)(h.A,{className:"w-12 h-12 text-mp-gray-400 mb-4"}),(0,D.jsx)("h4",{className:"text-lg font-medium text-mp-gray-600 mb-2",children:"No hay gastos por categor\xedas"}),(0,D.jsx)("p",{className:"text-sm text-mp-gray-500",children:"Los gastos aparecer\xe1n aqu\xed una vez que agregues algunos gastos con categor\xedas"})]})]})]}),(0,D.jsxs)("div",{className:"card",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold text-mp-gray-900",children:"Transacciones Recientes"}),(0,D.jsx)("button",{className:"btn-ghost",children:"Ver todas"})]}),(0,D.jsx)("div",{className:"space-y-4",children:[...F.expenses.slice(0,3),...F.incomes.slice(0,2)].sort(((e,s)=>new Date(s.created_at)-new Date(e.created_at))).slice(0,5).map(((e,s)=>{const t=e.hasOwnProperty("paid"),a=V(e.category_id),r=F.categories.find((s=>s.id===e.category_id));return(0,D.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-mp bg-mp-gray-50 border-l-4 ".concat(a.border||(t?"border-mp-error":"border-mp-secondary")),children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)("div",{className:"p-2 rounded-mp ".concat(t?"bg-red-100":"bg-green-100"),children:t?(0,D.jsx)(x.A,{className:"w-4 h-4 text-mp-error"}):(0,D.jsx)(m.A,{className:"w-4 h-4 text-mp-secondary"})}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("p",{className:"font-medium text-mp-gray-900",children:e.description}),t&&(0,D.jsxs)("div",{className:"flex items-center space-x-1",children:[e.paid?(0,D.jsx)(p.A,{className:"w-4 h-4 text-mp-secondary"}):(0,D.jsx)(g.A,{className:"w-4 h-4 text-mp-error"}),!e.paid&&(0,D.jsx)("span",{className:"badge-error text-xs",children:"Pendiente"})]}),r&&(0,D.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a.bg," ").concat(a.text," border ").concat(a.border),children:r.name})]}),(0,D.jsx)("p",{className:"text-sm text-mp-gray-500",children:new Date(e.created_at).toLocaleDateString("es-AR")})]})]}),(0,D.jsxs)("div",{className:"text-right",children:[(0,D.jsxs)("p",{className:"font-semibold ".concat(t?"text-mp-error":"text-mp-secondary"),children:[t?"-":"+",K(e.amount)]}),e.percentage&&(0,D.jsxs)("p",{className:"text-sm text-mp-gray-500",children:[Y(e.percentage)," del total"]})]})]},s)}))})]})]})}}}]);
//# sourceMappingURL=941.7f5ce0d8.chunk.js.map