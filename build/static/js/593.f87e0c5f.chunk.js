/*! For license information please see 593.f87e0c5f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfinancial_resume_engine_frontend=self.webpackChunkfinancial_resume_engine_frontend||[]).push([[593],{1360:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8995).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4505:(e,s,t)=>{t.d(s,{Ee:()=>h,_2:()=>m,fm:()=>i,rh:()=>p,sh:()=>o,t_:()=>d,vv:()=>x,zZ:()=>u});var a=t(2555),r=t(9722),n=t(3768);const c=r.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}}),l="user123";c.interceptors.request.use((e=>(e.headers["x-caller-id"]=l,e)),(e=>Promise.reject(e))),c.interceptors.response.use((e=>e),(e=>{var s,t,a,r,c;const l=(null===(s=e.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.error)||e.message||"Error desconocido";return 401===(null===(a=e.response)||void 0===a?void 0:a.status)?n.Ay.error("No autorizado"):404===(null===(r=e.response)||void 0===r?void 0:r.status)?n.Ay.error("Recurso no encontrado"):(null===(c=e.response)||void 0===c?void 0:c.status)>=500?n.Ay.error("Error del servidor"):n.Ay.error(l),Promise.reject(e)}));const i={list:()=>c.get("/categories"),get:e=>c.get("/categories/".concat(e)),create:e=>c.post("/categories",(0,a.A)((0,a.A)({},e),{},{user_id:l})),update:(e,s)=>c.patch("/categories/".concat(e),(0,a.A)((0,a.A)({},s),{},{user_id:l})),delete:e=>c.delete("/categories/".concat(e))},o={list:()=>c.get("/expenses"),listUnpaid:()=>c.get("/expenses/unpaid"),get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,s=arguments.length>1?arguments[1]:void 0;return c.get("/expenses/".concat(e,"/").concat(s))},create:e=>c.post("/expenses",(0,a.A)((0,a.A)({},e),{},{user_id:l})),update:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,s=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return c.patch("/expenses/".concat(e,"/").concat(s),(0,a.A)((0,a.A)({},t),{},{user_id:l}))},delete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,s=arguments.length>1?arguments[1]:void 0;return c.delete("/expenses/".concat(e,"/").concat(s))}},d={list:()=>c.get("/incomes"),get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,s=arguments.length>1?arguments[1]:void 0;return c.get("/incomes/".concat(e,"/").concat(s))},create:e=>c.post("/incomes",(0,a.A)((0,a.A)({},e),{},{user_id:l})),update:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,s=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return c.patch("/incomes/".concat(e,"/").concat(s),(0,a.A)((0,a.A)({},t),{},{user_id:l}))},delete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,s=arguments.length>1?arguments[1]:void 0;return c.delete("/incomes/".concat(e,"/").concat(s))}},m={generate:(e,s)=>c.get("/reports",{params:{start_date:e,end_date:s}})},u={overview:e=>c.get("/dashboard",{params:e})},p={expenses:e=>c.get("/expenses/summary",{params:e}),incomes:e=>c.get("/incomes/summary",{params:e}),categories:e=>c.get("/categories/analytics",{params:e})},x=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),h=e=>"".concat(e.toFixed(1),"%")},6533:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8995).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},7593:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(2555),r=t(5043),n=t(7950),c=t(4919),l=t(9292),i=t(8646),o=t(1360),d=t(6533),m=t(9855),u=t(4505),p=t(3768),x=t(579);const h=()=>{const[e,s]=(0,r.useState)([]),[t,h]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0),[y,j]=(0,r.useState)(!1),[f,N]=(0,r.useState)(null),[A,b]=(0,r.useState)(""),[_,w]=(0,r.useState)(""),[S,C]=(0,r.useState)(""),[k,E]=(0,r.useState)({description:"",amount:"",category_id:""});(0,r.useEffect)((()=>{I()}),[]);const D=e=>{const[s,t]=e.split("-"),a=new Date(parseInt(s),parseInt(t)-1,1).toLocaleDateString("es-AR",{month:"long"});return a.charAt(0).toUpperCase()+a.slice(1)},I=async()=>{try{var e,t;v(!0);const[a,r]=await Promise.all([u.t_.list(),u.fm.list()]),n=(null===(e=a.data)||void 0===e?void 0:e.incomes)||a.data||[],c=(null===(t=r.data)||void 0===t?void 0:t.data)||r.data||[];s(Array.isArray(n)?n:[]),h(Array.isArray(c)?c:[])}catch(a){console.error("Error loading data:",a),p.Ay.error("Error al cargar los datos"),s([]),h([])}finally{v(!1)}},T=Array.isArray(e)?e.filter((e=>{const s=e.description.toLowerCase().includes(A.toLowerCase()),t=new Date(e.created_at),a=!_||t.getFullYear().toString()===_,r=!S||e.created_at.slice(0,7)===S;return s&&a&&r})):[],P=T.reduce(((e,s)=>e+s.amount),0);return g?(0,x.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,x.jsx)("div",{className:"spinner"}),(0,x.jsx)("span",{className:"ml-2 text-mp-gray-600",children:"Cargando ingresos..."})]}):(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-mp-gray-600",children:"Total Ingresos"}),(0,x.jsx)("p",{className:"text-2xl font-bold text-mp-secondary",children:(0,u.vv)(P)})]}),(0,x.jsx)("div",{className:"p-3 rounded-mp bg-green-100",children:(0,x.jsx)(c.A,{className:"w-6 h-6 text-mp-secondary"})})]})}),(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-mp-gray-600",children:"Cantidad de Ingresos"}),(0,x.jsx)("p",{className:"text-2xl font-bold text-mp-secondary",children:T.length})]}),(0,x.jsx)("div",{className:"p-3 rounded-mp bg-green-100",children:(0,x.jsx)(c.A,{className:"w-6 h-6 text-mp-secondary"})})]})})]}),(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,x.jsxs)("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4",children:[(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-mp-gray-400"}),(0,x.jsx)("input",{type:"text",placeholder:"Buscar ingresos...",value:A,onChange:e=>b(e.target.value),className:"pl-10 input w-full sm:w-64"})]}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-mp-gray-400"}),(0,x.jsxs)("select",{value:_,onChange:e=>{w(e.target.value),C("")},className:"pl-10 input w-full sm:w-32",children:[(0,x.jsx)("option",{value:"",children:"Todos"}),(()=>{if(!e.length)return[];return[...new Set(e.map((e=>new Date(e.created_at).getFullYear())))].sort(((e,s)=>s-e))})().map((e=>(0,x.jsx)("option",{value:e.toString(),children:e},e)))]})]}),(0,x.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"input w-full sm:w-40",disabled:!_,children:[(0,x.jsx)("option",{value:"",children:"Todos los meses"}),(()=>{if(!e.length)return[];let s=e;_&&(s=e.filter((e=>new Date(e.created_at).getFullYear().toString()===_)));return[...new Set(s.map((e=>e.created_at.slice(0,7))))].sort().reverse()})().map((e=>(0,x.jsx)("option",{value:e,children:D(e)},e)))]})]})]}),(0,x.jsxs)("button",{onClick:()=>j(!0),className:"btn-secondary flex items-center space-x-2",children:[(0,x.jsx)(o.A,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Nuevo Ingreso"})]})]})}),(0,x.jsx)("div",{className:"card",children:(0,x.jsx)("div",{className:"space-y-4",children:0===T.length?(0,x.jsxs)("div",{className:"text-center py-12",children:[(0,x.jsx)(c.A,{className:"w-12 h-12 text-mp-gray-400 mx-auto mb-4"}),(0,x.jsx)("h3",{className:"text-lg font-medium text-mp-gray-900 mb-2",children:"No hay ingresos"}),(0,x.jsx)("p",{className:"text-mp-gray-500",children:"Comienza agregando tu primer ingreso"})]}):T.map((e=>{const s=t.find((s=>s.id===e.category_id));return(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-mp bg-mp-gray-50 hover:bg-mp-gray-100 transition-colors",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsx)("div",{className:"p-2 rounded-mp bg-green-100",children:(0,x.jsx)(c.A,{className:"w-5 h-5 text-mp-secondary"})}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("h3",{className:"font-medium text-mp-gray-900",children:e.description}),s&&(0,x.jsx)("span",{className:"badge-info",children:s.name})]}),(0,x.jsxs)("div",{className:"text-sm text-mp-gray-500 mt-1",children:["Creado: ",new Date(e.created_at).toLocaleDateString("es-AR")]})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsx)("div",{className:"text-right",children:(0,x.jsxs)("p",{className:"font-semibold text-mp-secondary text-lg",children:["+",(0,u.vv)(e.amount)]})}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("button",{onClick:()=>(e=>{N(e),E({description:e.description,amount:e.amount.toString(),category_id:e.category_id||""}),j(!0)})(e),className:"p-2 rounded-mp text-mp-gray-600 hover:bg-mp-gray-200 transition-colors",children:(0,x.jsx)(d.A,{className:"w-4 h-4"})}),(0,x.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este ingreso?"))try{await u.t_.delete(e.user_id,e.id),p.Ay.success("Ingreso eliminado correctamente"),I()}catch(s){p.Ay.error("Error al eliminar el ingreso")}})(e),className:"p-2 rounded-mp text-mp-error hover:bg-red-100 transition-colors",children:(0,x.jsx)(m.A,{className:"w-4 h-4"})})]})]})]},e.id)}))})}),y&&(0,n.createPortal)((0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white rounded-mp-lg max-w-md w-full p-6",children:[(0,x.jsx)("h2",{className:"text-xl font-bold text-mp-gray-900 mb-6",children:f?"Editar Ingreso":"Nuevo Ingreso"}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=(0,a.A)((0,a.A)({},k),{},{amount:parseFloat(k.amount)});f?(await u.t_.update(f.user_id,f.id,e),p.Ay.success("Ingreso actualizado correctamente")):(await u.t_.create(e),p.Ay.success("Ingreso creado correctamente")),j(!1),N(null),E({description:"",amount:"",category_id:""}),I()}catch(s){p.Ay.error("Error al guardar el ingreso")}},className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-mp-gray-700 mb-2",children:"Descripci\xf3n"}),(0,x.jsx)("input",{type:"text",value:k.description,onChange:e=>E((0,a.A)((0,a.A)({},k),{},{description:e.target.value})),className:"input",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-mp-gray-700 mb-2",children:"Monto"}),(0,x.jsx)("input",{type:"number",step:"0.01",value:k.amount,onChange:e=>E((0,a.A)((0,a.A)({},k),{},{amount:e.target.value})),className:"input",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-mp-gray-700 mb-2",children:"Categor\xeda"}),(0,x.jsxs)("select",{value:k.category_id,onChange:e=>E((0,a.A)((0,a.A)({},k),{},{category_id:e.target.value})),className:"input",children:[(0,x.jsx)("option",{value:"",children:"Seleccionar categor\xeda"}),t.map((e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,x.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,x.jsx)("button",{type:"button",onClick:()=>{j(!1),N(null),E({description:"",amount:"",category_id:""})},className:"btn-outline flex-1",children:"Cancelar"}),(0,x.jsx)("button",{type:"submit",className:"btn-secondary flex-1",children:f?"Actualizar":"Crear"})]})]})]})}),document.body)]})}},8646:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8995).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9855:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8995).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=593.f87e0c5f.chunk.js.map